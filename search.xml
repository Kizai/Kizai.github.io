<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Hexo 博客部署到阿里云ECS服务器(Ubuntu 20.04)和域名解析</title>
      <link href="/2021/11/14/DeployECS/"/>
      <url>/2021/11/14/DeployECS/</url>
      
        <content type="html"><![CDATA[<h3 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h3><p>一开始我把<code>Hexo</code>博客部署到<code>Github</code>上,其实都是博客最入门的做法，如果没有把自己做的博客部署到自己购买的服务器上再加上域名解析，我觉得这个过程是不完整的，所以我把我自己部署网站的整个过程都记录下来，希望可以对即将部署自己网站的小伙伴们，提供一些参考意见。</p><h2 id="服务器配置："><a href="#服务器配置：" class="headerlink" title="服务器配置："></a>服务器配置：</h2><h3 id="服务器购买推荐"><a href="#服务器购买推荐" class="headerlink" title="服务器购买推荐:"></a>服务器购买推荐:</h3><ol><li><a href="https://www.aliyun.com/">阿里云服务器</a>，阿里云的服务器每年在双十一都会有活动，优惠很大。</li><li>推荐使用”轻量级应用共享型ECS服务器”,推荐安装系统<code>Ubuntu 20.04</code>，或者你自己最熟悉的系统。</li></ol><h3 id="远程连接服务器"><a href="#远程连接服务器" class="headerlink" title="远程连接服务器"></a>远程连接服务器</h3><ol><li>进入阿里云→云服务器管理控制台→远程连接，设置好root密码重启电脑生效。</li><li>配置ssh远程连接服务器，在云服务器控制台→进入服务器实例→安全组→配置规则→出方向→快速添加→选中SSH(22)，按确定即可！！</li></ol><p><img src="https://raw.githubusercontent.com/Kizai/Images/main/202111142256882.png" alt="22"></p><ol><li>假设我服务器公网<code>IP</code>地址就是<code>20.21.11.11</code>，在本机电脑使用<code>ssh root@20.21.11.11</code>远程登陆服务器，连接成功后输入自己刚刚设置好的云服务器的密码，就可以成功登录登录到云服务器啦。</li></ol><h3 id="在云服务器中创建新用户"><a href="#在云服务器中创建新用户" class="headerlink" title="在云服务器中创建新用户"></a>在云服务器中创建新用户</h3><h4 id="创建新用户kizai"><a href="#创建新用户kizai" class="headerlink" title="创建新用户kizai"></a>创建新用户<code>kizai</code></h4><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">adduser kizai <span class="comment"># 这个会提示需要重新设置一个新的登录密码</span></span><br><span class="line">chmod 740 /etc/sudoers</span><br><span class="line">vim /etc/sudoers</span><br></pre></td></tr></tbody></table></figure><p>找到如下<code>root ALL:(ALL:ALL) ALL</code>后，添加一行<br></p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">kizai ALL:(ALL:ALL) ALL <span class="comment"># kizai替换成自己的用户名</span></span><br></pre></td></tr></tbody></table></figure><p></p><p>获取<code>root</code>权限<br></p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">sudo passwd kizai</span><br></pre></td></tr></tbody></table></figure><p></p><h3 id="切换到kizai用户"><a href="#切换到kizai用户" class="headerlink" title="切换到kizai用户"></a>切换到<code>kizai</code>用户</h3><p>切换到新建的用户后(后面都是以此用户和<code>~</code>目录下工作)，安装一些常用的软件。<br></p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">su kizai</span><br><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get upgrade</span><br><span class="line">sudo apt install vim git htop screenfetch curl wget tmux <span class="comment"># 看自己的需求来安装</span></span><br></pre></td></tr></tbody></table></figure><p></p><h3 id="配置SSH"><a href="#配置SSH" class="headerlink" title="配置SSH"></a>配置<code>SSH</code></h3><p>创建<code>~/.ssh</code>和<code>authorized_keys</code>文件,赋予权限。<br></p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">mkdir ~/.ssh</span><br><span class="line">vim ~/.ssh/authorized_keys <span class="comment">#名字不能错</span></span><br><span class="line">chmod 600 ~/.ssh/authorized_keys</span><br><span class="line">chmod 700 ~/.ssh/</span><br></pre></td></tr></tbody></table></figure><p></p><h3 id="本机电脑创建ssh公钥"><a href="#本机电脑创建ssh公钥" class="headerlink" title="本机电脑创建ssh公钥"></a>本机电脑创建<code>ssh</code>公钥</h3><p>切回到本机电脑，需要生成一个本机电脑的<code>ssh</code>公钥，放好服务器的<code>.ssh/authorized_keys</code>文件里面。如果本机电脑已经生成公钥可以忽略我这一步。window系统这边建议先装一个叫<code>Window Terminal</code>的软件，以下的操作基于这个软件。<br></p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">ssh-keygen.exe <span class="comment"># 一路按确定就好，会有一个路径提示给你在哪存放了id_rsa.pub</span></span><br><span class="line">cat C:\Users\KIZAI\.ssh\id_rsa.pub <span class="comment"># 根据你的路径修改，直接复制你的公钥到你的剪贴板备用。 </span></span><br></pre></td></tr></tbody></table></figure><br>再回到服务器端把公钥加到<code>authoried_keys</code>文件中。<br>断开服务器连接，再使用<code>ssh kizai@20.21.11.11</code>就可以不需要输登录密码就可以成功连接了。<p></p><h3 id="配置Git"><a href="#配置Git" class="headerlink" title="配置Git"></a>配置Git</h3><p>创建<code>Git</code>裸库<code>blog.git</code>,和工作目录<code>blog</code>（存放解析后<code>html</code>文件）。<br></p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line">mkdir blog</span><br><span class="line">git init --bare blog.git</span><br><span class="line">vim blog.git/hooks/post-receive <span class="comment"># 创建新文件</span></span><br></pre></td></tr></tbody></table></figure><p></p><p>在<code>post-receive</code>添加<code>hook</code>钩子。<br></p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">git --work-tree=/home/kizai/blog --git-dir=/home/kizai/blog.git checkout -f</span><br></pre></td></tr></tbody></table></figure><p></p><p>添加执行权限<br></p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">chmod +x blog.git/hooks/post-receive</span><br></pre></td></tr></tbody></table></figure><br>可以执行<code>git clone kizai@20.21.11.11:/home/kizai/blog.git</code>下载云服务的文件到本机。<p></p><h3 id="安装nginx"><a href="#安装nginx" class="headerlink" title="安装nginx"></a>安装<code>nginx</code></h3><p>安装 nginx 和修改对应配置文件<br></p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">sudo apt install</span><br><span class="line">sudo vim /etc/nginx/sites-available/default</span><br></pre></td></tr></tbody></table></figure><p></p><p>找到<br></p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># include snippets/snakeoil.conf;</span></span><br><span class="line"></span><br><span class="line">root /var/www/html; </span><br></pre></td></tr></tbody></table></figure><p></p><p>替换<br></p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># include snippets/snakeoil.conf;</span></span><br><span class="line"></span><br><span class="line">root /home/kizai/blog;</span><br></pre></td></tr></tbody></table></figure><p></p><p>执行 <code>service nginx status</code> 查看<code>nginx</code>状态，其默认状态是运行中（服务开始了） + 开机自启 （若是没有，需要执行此状态 ）；如果不熟悉<code>nginx</code>的常用命令可以参考<a href="https://www.keycdn.com/support/nginx-commands">9 Popular Nginx Commands You Should Know</a>。</p><p>若此刻直接访问云服务器的公网<code>IP</code>不会显示任何内容，因为云服务器的<code>80</code>端口还没被打开。<br>回到云服务器控制管理中心，在云服务器控制台→进入服务器实例→安全组→配置规则→入方向→快速添加→选中HTTP(80)，按确定即可！！<br><img src="https://raw.githubusercontent.com/Kizai/Images/main/202111142255499.png" alt="80"></p><p>重新输入服务器公网<code>IP</code>就可以看到<code>nginx</code>欢迎界面，因为此时<code>/home/kizai/blog</code>文件夹为空，没有任何<code>html</code>文件。</p><h2 id="本机配置"><a href="#本机配置" class="headerlink" title="本机配置:"></a>本机配置:</h2><h3 id="创建hexo文件夹"><a href="#创建hexo文件夹" class="headerlink" title="创建hexo文件夹"></a>创建<code>hexo</code>文件夹</h3><p>在本地创建一个<code>kizaiblogtest</code>的文件夹，用来最小化验证部署是否正确。<br></p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line">hexo init kizaiblogtest     <span class="comment"># 创建和初始化kizaiblogtest文件夹</span></span><br><span class="line">cnpm install                <span class="comment"># 安装插件</span></span><br><span class="line">cnpm install hexo-deployer-git  <span class="comment"># hexo deploy 部署插件</span></span><br></pre></td></tr></tbody></table></figure><p></p><p>修改<code>kizaiblogtest</code>根目录下的配置文件```_config.yml````，末尾修改为<br></p><figure class="highlight yml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/one-command-deployment</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">kizai@20.21.11.11:/home/kizai/blog.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span>                           </span><br><span class="line">  <span class="attr">message:</span> <span class="string">'站点更新:<span class="template-variable">{{now("YYYY-MM-DD HH:mm:ss")}}</span>'</span></span><br></pre></td></tr></tbody></table></figure><p></p><h3 id="部署到云服务器"><a href="#部署到云服务器" class="headerlink" title="部署到云服务器"></a>部署到云服务器</h3><p>在<code>kizaiblogtest</code>文件夹中，使用终端进行部署<br></p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo g <span class="comment"># 清理 生成html文件</span></span><br><span class="line">hexo deploy &amp;&amp; hexo  <span class="comment"># 部署，会自动将生成的 html 文件， push 到阿里云服务器的 /home/kizai/blog 文件夹中</span></span><br></pre></td></tr></tbody></table></figure><br>然后重启阿里云服务器后，浏览器输入服务器公网<code>IP</code>，即可网页看到解析后的部署网页 “Hello World”。<p></p><p>最后替换为自己的真实博客文件夹的<code>_config.yml</code>文件末尾处替换为如上，重新执行<code>hexo deploy</code>部署即可成功；建议使用<code>Github</code>或者<code>Gitee</code>把之前的工程文件托管起来做好备份。</p><h2 id="域名解析"><a href="#域名解析" class="headerlink" title="域名解析"></a>域名解析</h2><p>上面的步骤只是把博客部署云服务器上了，但是访问它还是需要用到公网<code>IP</code>，这访问也太难受了，所以我们要使用域名的方式来访问网站，那怎么把域名绑定到服务器上呢？其实比较简单，看步骤！</p><ol><li>在阿里云或者其他平台购买域名，根据自己的想法来设计自己的域名和它的后缀。购买完需要实名认证。</li><li>回到阿里云控制台搜索”云解析DNS”，进入云解析DNS→域名解析→看到自己的域名后面有一个解析设置→点击解析设置，可参考以下设置：</li></ol><p><img src="https://raw.githubusercontent.com/Kizai/Images/main/202111142314705.png" alt="dnsip"></p><ol><li>等个几分钟，使用注册好的域名就可以访问自己的博客啦！</li><li>在中国地区购买的服务器和域名是需要备案的，大家绑定好域名记得做好备案工作喔！不然网站是正常访问不了的。</li></ol>]]></content>
      
      
      <categories>
          
          <category> Linux,Hexo,ECS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux,Hexo,部署,阿里云,服务器,域名解析 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ESP8266安卓TCP客户端开发（含全部源码）</title>
      <link href="/2021/11/13/ESPTCP/"/>
      <url>/2021/11/13/ESPTCP/</url>
      
        <content type="html"><![CDATA[<h2 id="ESP8266安卓TCP客户端开发"><a href="#ESP8266安卓TCP客户端开发" class="headerlink" title="ESP8266安卓TCP客户端开发"></a>ESP8266安卓TCP客户端开发</h2><p>最近在玩8266模块，想让它在局域网控制下开关，所以就搞开发一个安卓客户端调试的工具<br>直接上步骤：</p><h3 id="第一步新建一个空白的Activity"><a href="#第一步新建一个空白的Activity" class="headerlink" title="第一步新建一个空白的Activity"></a>第一步新建一个空白的Activity</h3><p><img src="https://img-blog.csdnimg.cn/20200702130122671.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMDAxMTYz,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>工程名字自己可以改<br><img src="https://img-blog.csdnimg.cn/20200702130158997.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMDAxMTYz,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h3 id="第二先在AndroidManifest-xml加入网络权限"><a href="#第二先在AndroidManifest-xml加入网络权限" class="headerlink" title="第二先在AndroidManifest.xml加入网络权限"></a>第二先在AndroidManifest.xml加入网络权限</h3><figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line">&lt;uses-permission android:name=<span class="string">"android.permission.INTERNET"</span>/&gt;</span><br></pre></td></tr></tbody></table></figure><h3 id="第三修改界面布局（注意这个布局必须要支持约束布局才能正常使用不然会报错，可以使用AS3-6以上版本）："><a href="#第三修改界面布局（注意这个布局必须要支持约束布局才能正常使用不然会报错，可以使用AS3-6以上版本）：" class="headerlink" title="第三修改界面布局（注意这个布局必须要支持约束布局才能正常使用不然会报错，可以使用AS3.6以上版本）："></a>第三修改界面布局（注意这个布局必须要支持约束布局才能正常使用不然会报错，可以使用AS3.6以上版本）：</h3><figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span>?&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">    <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">    <span class="attr">tools:context</span>=<span class="string">".MainActivity"</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">Button</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:id</span>=<span class="string">"@+id/btn_send"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:layout_width</span>=<span class="string">"0dp"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:background</span>=<span class="string">"@color/colorPrimary"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:text</span>=<span class="string">"@string/c"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:textColor</span>=<span class="string">"#F4F2F2"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:textSize</span>=<span class="string">"18sp"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintBottom_toTopOf</span>=<span class="string">"@+id/guideline2"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">"parent"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintHorizontal_bias</span>=<span class="string">"0.0"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">"parent"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">"@+id/guideline2"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintVertical_bias</span>=<span class="string">"0.52"</span> /&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">EditText</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:id</span>=<span class="string">"@+id/et_port"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:layout_width</span>=<span class="string">"0dp"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:autofillHints</span>=<span class="string">""</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:ems</span>=<span class="string">"10"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:hint</span>=<span class="string">"@string/s"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:inputType</span>=<span class="string">"number"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintBottom_toTopOf</span>=<span class="string">"@+id/guideline3"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">"parent"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintHorizontal_bias</span>=<span class="string">"0.81"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">"@+id/guideline4"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">"@+id/guideline3"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintVertical_bias</span>=<span class="string">"0.555"</span> /&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">EditText</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:id</span>=<span class="string">"@+id/et_ip"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:layout_width</span>=<span class="string">"0dp"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:autofillHints</span>=<span class="string">""</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:ems</span>=<span class="string">"10"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:hint</span>=<span class="string">"@string/sip"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:inputType</span>=<span class="string">"date"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintBottom_toTopOf</span>=<span class="string">"@+id/guideline"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">"parent"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintHorizontal_bias</span>=<span class="string">"0.81"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">"@+id/guideline4"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">"@+id/guideline"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintVertical_bias</span>=<span class="string">"0.555"</span> /&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">TextView</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:id</span>=<span class="string">"@+id/textView"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:layout_width</span>=<span class="string">"0dp"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:text</span>=<span class="string">"@string/ssip"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:textAlignment</span>=<span class="string">"textEnd"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:textSize</span>=<span class="string">"18sp"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintBottom_toTopOf</span>=<span class="string">"@+id/guideline"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintEnd_toStartOf</span>=<span class="string">"@+id/guideline4"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">"parent"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">"@+id/guideline"</span> /&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">TextView</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:id</span>=<span class="string">"@+id/textView2"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:layout_width</span>=<span class="string">"0dp"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:text</span>=<span class="string">"@string/sd"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:textAlignment</span>=<span class="string">"textEnd"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:textSize</span>=<span class="string">"18sp"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintBottom_toTopOf</span>=<span class="string">"@+id/guideline3"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintEnd_toStartOf</span>=<span class="string">"@+id/guideline4"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintHorizontal_bias</span>=<span class="string">"0.51"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">"parent"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">"@+id/guideline3"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintVertical_bias</span>=<span class="string">"0.526"</span> /&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.Guideline</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:id</span>=<span class="string">"@+id/guideline3"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:orientation</span>=<span class="string">"horizontal"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintGuide_percent</span>=<span class="string">"0.3"</span> /&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.Guideline</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:id</span>=<span class="string">"@+id/guideline5"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:orientation</span>=<span class="string">"horizontal"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintGuide_percent</span>=<span class="string">"0.6"</span> /&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.Guideline</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:id</span>=<span class="string">"@+id/guideline6"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:orientation</span>=<span class="string">"horizontal"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintGuide_percent</span>=<span class="string">"0.9"</span> /&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.Guideline</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:id</span>=<span class="string">"@+id/guideline"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:orientation</span>=<span class="string">"horizontal"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintGuide_percent</span>=<span class="string">"0.2"</span> /&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.Guideline</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:id</span>=<span class="string">"@+id/guideline2"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:orientation</span>=<span class="string">"horizontal"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintGuide_percent</span>=<span class="string">"0.75"</span> /&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.Guideline</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:id</span>=<span class="string">"@+id/guideline4"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:orientation</span>=<span class="string">"vertical"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintGuide_percent</span>=<span class="string">"0.38"</span> /&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.Guideline</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:id</span>=<span class="string">"@+id/guideline7"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:orientation</span>=<span class="string">"vertical"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintGuide_percent</span>=<span class="string">"0.5"</span> /&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.Guideline</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:id</span>=<span class="string">"@+id/guideline8"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:orientation</span>=<span class="string">"horizontal"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintGuide_percent</span>=<span class="string">"0.45"</span> /&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">Button</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:id</span>=<span class="string">"@+id/btn_link"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:layout_width</span>=<span class="string">"0dp"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:background</span>=<span class="string">"#16E6CE"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:text</span>=<span class="string">"@string/contenct"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:textColor</span>=<span class="string">"#F4EFEF"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:textSize</span>=<span class="string">"18sp"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintBottom_toTopOf</span>=<span class="string">"@+id/guideline8"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">"parent"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintHorizontal_bias</span>=<span class="string">"0.0"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">"parent"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">"@+id/guideline8"</span> /&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">EditText</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:id</span>=<span class="string">"@+id/et_data"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:layout_width</span>=<span class="string">"255dp"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:layout_height</span>=<span class="string">"48dp"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:autofillHints</span>=<span class="string">""</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:ems</span>=<span class="string">"10"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:hint</span>=<span class="string">"@string/plesdata"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:inputType</span>=<span class="string">"date|text"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintBottom_toTopOf</span>=<span class="string">"@+id/guideline5"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">"parent"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintHorizontal_bias</span>=<span class="string">"1.0"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">"parent"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">"@+id/guideline5"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintVertical_bias</span>=<span class="string">"0.446"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">tools:ignore</span>=<span class="string">"LabelFor"</span> /&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">TextView</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:id</span>=<span class="string">"@+id/tv_sendata"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:layout_width</span>=<span class="string">"0dp"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:text</span>=<span class="string">"@string/senddata"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:textAlignment</span>=<span class="string">"textEnd"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:textSize</span>=<span class="string">"18sp"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintBottom_toTopOf</span>=<span class="string">"@+id/guideline5"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintEnd_toStartOf</span>=<span class="string">"@+id/guideline4"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">"parent"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">"@+id/guideline5"</span> /&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">TextView</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:id</span>=<span class="string">"@+id/textView4"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:text</span>=<span class="string">"@string/tcp"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintBottom_toTopOf</span>=<span class="string">"@+id/guideline6"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">"parent"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">"parent"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">"@+id/guideline6"</span> /&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span></span><br></pre></td></tr></tbody></table></figure><p><img src="https://img-blog.csdnimg.cn/20200702130708821.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMDAxMTYz,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h3 id="第四新建SendAsyncTask-java文件"><a href="#第四新建SendAsyncTask-java文件" class="headerlink" title="第四新建SendAsyncTask.java文件"></a>第四新建SendAsyncTask.java文件</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.kizai.projects.esp8266;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.AsyncTask;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintStream;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="comment">//这个要根据自己的文件来导包，需要改这里</span></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> com.kizai.projects.esp8266.MainActivity.ip;<span class="comment">//记得导包</span></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> com.kizai.projects.esp8266.MainActivity.port;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SendAsyncTask</span> <span class="keyword">extends</span> <span class="title">AsyncTask</span>&lt;<span class="title">String</span>, <span class="title">Void</span>, <span class="title">Void</span>&gt; </span>{</span><br><span class="line"></span><br><span class="line">    <span class="comment">//这里是连接ESP8266的IP和端口,连接手机可以看到IP地址</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String IP = ip;<span class="comment">//可以直接调用全局变量</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> PORT = port;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> Void <span class="title">doInBackground</span><span class="params">(String... params)</span> </span>{</span><br><span class="line">        String str = params[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            Socket client = <span class="keyword">new</span> Socket(IP, PORT);</span><br><span class="line">            client.setSoTimeout(<span class="number">5000</span>);</span><br><span class="line">            <span class="comment">//获取Socket的输出流，用来发送数据给服务端</span></span><br><span class="line">            PrintStream out = <span class="keyword">new</span> PrintStream(client.getOutputStream());</span><br><span class="line">            out.print(str);</span><br><span class="line">            out.flush();</span><br><span class="line">            out.close();</span><br><span class="line">            client.close();</span><br><span class="line">        } <span class="keyword">catch</span> (IOException e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h3 id="第五回到主活动代码MainActivity-java："><a href="#第五回到主活动代码MainActivity-java：" class="headerlink" title="第五回到主活动代码MainActivity.java："></a>第五回到主活动代码MainActivity.java：</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.kizai.projects.esp8266;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.annotation.SuppressLint;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.os.Handler;</span><br><span class="line"><span class="keyword">import</span> android.os.Message;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.Button;</span><br><span class="line"><span class="keyword">import</span> android.widget.EditText;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title">View</span>.<span class="title">OnClickListener</span> </span>{</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String ip, pport, sendData;<span class="comment">//调用全局数据变量，方便调用</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> port;</span><br><span class="line">    <span class="keyword">private</span> EditText et_ip, et_port, et_data;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        initView();<span class="comment">//初始化控件</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//初始化控件</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initView</span><span class="params">()</span> </span>{</span><br><span class="line">        Button btn_send = findViewById(R.id.btn_send);</span><br><span class="line">        Button btn_link = findViewById(R.id.btn_link);</span><br><span class="line">        et_ip = findViewById(R.id.et_ip);</span><br><span class="line">        et_port = findViewById(R.id.et_port);</span><br><span class="line">        et_data = findViewById(R.id.et_data);</span><br><span class="line"></span><br><span class="line">        btn_send.setOnClickListener(<span class="keyword">this</span>);</span><br><span class="line">        btn_link.setOnClickListener(<span class="keyword">this</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>{</span><br><span class="line">        <span class="keyword">switch</span> (v.getId()) {</span><br><span class="line">            <span class="comment">//连接</span></span><br><span class="line">            <span class="keyword">case</span> R.id.btn_link:</span><br><span class="line">                <span class="keyword">if</span> (et_port.length() != <span class="number">0</span> &amp;&amp; et_ip.length() != <span class="number">0</span>) {</span><br><span class="line">                    ip = et_ip.getText().toString().trim();<span class="comment">//获取输入的ip地址</span></span><br><span class="line">                    pport = et_port.getText().toString().trim();<span class="comment">//由于EditText的输入类型是String类型，所以先把输入的内容获取到，再通过下面的代码进行Int类型转换，如果自己有更好的方法也可以自行修改</span></span><br><span class="line">                    port = Integer.parseInt(pport);<span class="comment">//把端口的String类型的数据转换成int类型</span></span><br><span class="line">                    String str = <span class="string">"o\n"</span>;<span class="comment">//这是连接8266时发送的测试数据，要在8266那边做对应的判断才会有反应，如果不是连接8266的可以把以下两行行代码注释掉</span></span><br><span class="line">                    <span class="keyword">new</span> SendAsyncTask().execute(str);</span><br><span class="line">                    Toast.makeText(getApplicationContext(), <span class="string">"如果看到ESP8266的灯闪烁两次就代表连接成功！"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                } <span class="keyword">else</span> {</span><br><span class="line">                    Toast.makeText(getApplicationContext(), <span class="string">"请输入正确的ip和端口号！"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">                <span class="comment">//发送数据</span></span><br><span class="line">            <span class="keyword">case</span> R.id.btn_send:</span><br><span class="line">                sendData = et_data.getText().toString().trim();<span class="comment">//输入的数据</span></span><br><span class="line">                <span class="keyword">if</span> (!sendData.isEmpty()) {</span><br><span class="line">                    <span class="keyword">new</span> SendAsyncTask().execute(sendData);</span><br><span class="line">                } <span class="keyword">else</span> {</span><br><span class="line">                    Toast.makeText(getApplicationContext(), <span class="string">"请输入数据！"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="第六ESP8266-TCPServer服务端代码："><a href="#第六ESP8266-TCPServer服务端代码：" class="headerlink" title="第六ESP8266 TCPServer服务端代码："></a>第六ESP8266 TCPServer服务端代码：</h3><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ESP8266WiFi.h&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="comment">//定义最多多少个client可以连接本server(一般不要超过4个)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX_SRV_CLIENTS 2</span></span><br><span class="line"><span class="comment">//以下三个定义为调试定义</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DebugBegin(baud_rate)    Serial.begin(baud_rate)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DebugPrintln(message)    Serial.println(message)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DebugPrint(message)    Serial.print(message)</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> <span class="keyword">char</span>* ssid = <span class="string">"KIZAI-HOME"</span>;<span class="comment">//自己路由器的wifi名</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">char</span>* password = <span class="string">"700800900"</span>;<span class="comment">//自己路由器的密码</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">//创建server 端口号是23</span></span><br><span class="line"><span class="function">WiFiServer <span class="title">server</span><span class="params">(<span class="number">23</span>)</span></span>;</span><br><span class="line"><span class="comment">//管理clients</span></span><br><span class="line">WiFiClient serverClients[MAX_SRV_CLIENTS];</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>{</span><br><span class="line">  DebugBegin(<span class="number">115200</span>);</span><br><span class="line">  <span class="comment">//定义输出引脚</span></span><br><span class="line">  pinMode(LED_BUILTIN, OUTPUT);</span><br><span class="line">  <span class="comment">//定义高低电平</span></span><br><span class="line">  digitalWrite(LED_BUILTIN, HIGH); </span><br><span class="line">  WiFi.mode(WIFI_STA);</span><br><span class="line">  WiFi.begin(ssid, password);</span><br><span class="line">  DebugPrint(<span class="string">"\nConnecting to "</span>); </span><br><span class="line">  DebugPrintln(ssid);</span><br><span class="line">  <span class="keyword">uint8_t</span> i = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span> (WiFi.status() != WL_CONNECTED &amp;&amp; i++ &lt; <span class="number">20</span>) {</span><br><span class="line">    delay(<span class="number">500</span>);</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">if</span> (i == <span class="number">21</span>) {</span><br><span class="line">    DebugPrint(<span class="string">"Could not connect to"</span>); </span><br><span class="line">    DebugPrintln(ssid);</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>) {</span><br><span class="line">      delay(<span class="number">500</span>);</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  <span class="comment">//启动server</span></span><br><span class="line">  server.begin();</span><br><span class="line">  <span class="comment">//关闭小包合并包功能，不会延时发送数据</span></span><br><span class="line">  server.setNoDelay(<span class="literal">true</span>);</span><br><span class="line"> </span><br><span class="line">  DebugPrint(<span class="string">"Ready! Use 'telnet "</span>);</span><br><span class="line">  DebugPrint(WiFi.localIP());</span><br><span class="line">  DebugPrintln(<span class="string">" 23' to connect"</span>);</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>{</span><br><span class="line">  <span class="keyword">uint8_t</span> i;</span><br><span class="line">  <span class="comment">//检测是否有新的client请求进来</span></span><br><span class="line">  <span class="keyword">if</span> (server.hasClient()) {</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; MAX_SRV_CLIENTS; i++) {</span><br><span class="line">      <span class="comment">//释放旧无效或者断开的client</span></span><br><span class="line">      <span class="keyword">if</span> (!serverClients[i] || !serverClients[i].connected()) {</span><br><span class="line">        <span class="keyword">if</span> (serverClients[i]) {</span><br><span class="line">          serverClients[i].stop();</span><br><span class="line">        }</span><br><span class="line">        <span class="comment">//分配最新的client</span></span><br><span class="line">        serverClients[i] = server.available();</span><br><span class="line">        DebugPrint(<span class="string">"New client: "</span>); </span><br><span class="line">        DebugPrint(i);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">//当达到最大连接数 无法释放无效的client，需要拒绝连接</span></span><br><span class="line">    <span class="keyword">if</span> (i == MAX_SRV_CLIENTS) {</span><br><span class="line">      WiFiClient serverClient = server.available();</span><br><span class="line">      serverClient.stop();</span><br><span class="line">      DebugPrintln(<span class="string">"Connection rejected "</span>);</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  <span class="comment">//检测client发过来的数据</span></span><br><span class="line">  <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; MAX_SRV_CLIENTS; i++) {</span><br><span class="line">    <span class="keyword">if</span> (serverClients[i] &amp;&amp; serverClients[i].connected()) {</span><br><span class="line">      <span class="keyword">if</span> (serverClients[i].available()) {</span><br><span class="line">        <span class="comment">//get data from the telnet client and push it to the UART</span></span><br><span class="line">        <span class="keyword">while</span> (serverClients[i].available()) {</span><br><span class="line">          <span class="comment">//发送到串口调试器</span></span><br><span class="line"><span class="comment">//          Serial.write(serverClients[i].read());</span></span><br><span class="line">          <span class="keyword">char</span> data = serverClients[i].read();<span class="comment">//接收到的数据可以做出不同的反应</span></span><br><span class="line">          Serial.print(data);</span><br><span class="line">          <span class="keyword">switch</span>(data){</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'o'</span>:</span><br><span class="line">            <span class="comment">//闪烁两次</span></span><br><span class="line">              digitalWrite(LED_BUILTIN, LOW); <span class="comment">// 点亮LED</span></span><br><span class="line">              delay(<span class="number">100</span>);</span><br><span class="line">              digitalWrite(LED_BUILTIN, HIGH); <span class="comment">// 熄灭LED</span></span><br><span class="line">              delay(<span class="number">100</span>);</span><br><span class="line">              digitalWrite(LED_BUILTIN, LOW); <span class="comment">// 点亮LED</span></span><br><span class="line">              delay(<span class="number">100</span>);</span><br><span class="line">              digitalWrite(LED_BUILTIN, HIGH); <span class="comment">// 熄灭LED</span></span><br><span class="line">              delay(<span class="number">100</span>);</span><br><span class="line">              digitalWrite(LED_BUILTIN, LOW); <span class="comment">// 点亮LED</span></span><br><span class="line">              <span class="keyword">break</span>;</span><br><span class="line">          }</span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">if</span> (Serial.available()) {</span><br><span class="line">    <span class="comment">//把串口调试器发过来的数据 发送给client</span></span><br><span class="line">    <span class="keyword">size_t</span> len = Serial.available();</span><br><span class="line">    <span class="keyword">uint8_t</span> sbuf[len];</span><br><span class="line">    Serial.readBytes(sbuf, len);</span><br><span class="line">    <span class="comment">//push UART data to all connected telnet clients</span></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; MAX_SRV_CLIENTS; i++) {</span><br><span class="line">      <span class="keyword">if</span> (serverClients[i] &amp;&amp; serverClients[i].connected()) {</span><br><span class="line">        serverClients[i].write(sbuf, len);<span class="comment">//向所有客户端发送数据</span></span><br><span class="line">        delay(<span class="number">1</span>);</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"><span class="comment">//连接情况 用led灯的状态显示</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">blink</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">long</span> previousMillis = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> currstate = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (millis() - previousMillis &gt; <span class="number">200</span>)  <span class="comment">//200ms</span></span><br><span class="line">    {</span><br><span class="line">        previousMillis = millis();</span><br><span class="line">        currstate = <span class="number">1</span> - currstate;</span><br><span class="line"><span class="comment">//        digitalWrite(LED_BUILTIN, LOW); // 点亮LED</span></span><br><span class="line">        digitalWrite(LED_BUILTIN, currstate);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>8266端口监视器：<br><img src="https://img-blog.csdnimg.cn/20200702133906604.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMDAxMTYz,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h3 id="第七现在运行软件（真机和虚拟机都可以实现连接：前提是连接在统一个局域网里面）"><a href="#第七现在运行软件（真机和虚拟机都可以实现连接：前提是连接在统一个局域网里面）" class="headerlink" title="第七现在运行软件（真机和虚拟机都可以实现连接：前提是连接在统一个局域网里面）"></a>第七现在运行软件（真机和虚拟机都可以实现连接：前提是连接在统一个局域网里面）</h3><p><img src="https://img-blog.csdnimg.cn/20200702134104569.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMDAxMTYz,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>也可以看到串口监视器会有反应：New client:0o<br><img src="https://img-blog.csdnimg.cn/20200702134133928.png" alt="在这里插入图片描述"><br>测试发送数据：<br><img src="https://img-blog.csdnimg.cn/20200702134235689.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMDAxMTYz,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20200702134312593.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMDAxMTYz,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>看到串口监视器都是可以接收到数据的<br><img src="https://img-blog.csdnimg.cn/2020070213432565.png" alt="在这里插入图片描述"><br>希望这篇文章对你有所帮助，觉得还可以点赞收藏喔！也还可以点个关注，你们的支持是对我最大的鼓励！！！</p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android,ESP8266 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>df-sed-awk-du-grep</title>
      <link href="/2021/11/13/df-sed-awk-du-grep/"/>
      <url>/2021/11/13/df-sed-awk-du-grep/</url>
      
        <content type="html"><![CDATA[<h1 id="df-sed-awk-du-grep学习笔记"><a href="#df-sed-awk-du-grep学习笔记" class="headerlink" title="df-sed-awk-du-grep学习笔记"></a>df-sed-awk-du-grep学习笔记</h1><h2 id="参考来源："><a href="#参考来源：" class="headerlink" title="参考来源："></a>参考来源：</h2><ul><li><a href="https://www.runoob.com/linux/">https://www.runoob.com/linux/</a></li><li><a href="https://www.runoob.com/linux/linux-comm-awk.html">https://www.runoob.com/linux/linux-comm-awk.html</a></li></ul><h2 id="df命令："><a href="#df命令：" class="headerlink" title="df命令："></a>df命令：</h2><p> df（英文全拼：disk free） 命令用于显示目前在 Linux 系统上的文件系统磁盘使用情况统计。</p><h3 id="语法："><a href="#语法：" class="headerlink" title="语法："></a>语法：</h3><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">df [选项]... [FILE]...</span><br></pre></td></tr></tbody></table></figure><ul><li>文件-a, —all 包含所有的具有 0 Blocks 的文件系统</li><li>文件—block-size={SIZE} 使用 {SIZE} 大小的 Blocks</li><li>文件-h, —human-readable 使用人类可读的格式(预设值是不加这个选项的…)</li><li>文件-H, —si 很像 -h, 但是用 1000 为单位而不是用 1024</li><li>文件-i, —inodes 列出 inode 资讯，不列出已使用 block</li><li>文件-k, —kilobytes 就像是 —block-size=1024</li><li>文件-l, —local 限制列出的文件结构</li><li>文件-m, —megabytes 就像 —block-size=1048576</li><li>文件—no-sync 取得资讯前不 sync (预设值)</li><li>文件-P, —portability 使用 POSIX 输出格式</li><li>文件—sync 在取得资讯前 sync</li><li>文件-t, —type=TYPE 限制列出文件系统的 TYPE</li><li>文件-T, —print-type 显示文件系统的形式</li><li>文件-x, —exclude-type=TYPE 限制列出文件系统不要显示 TYPE</li><li>文件-v (忽略)</li><li>文件—help 显示这个帮手并且离开</li><li>文件—version 输出版本资讯并且离开<h3 id="实例："><a href="#实例：" class="headerlink" title="实例："></a>实例：</h3><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">```bash</span><br><span class="line">kizaiwsl2@KIZAI-DESKTOP:~$ df</span><br><span class="line">Filesystem     1K-blocks      Used Available Use% Mounted on</span><br><span class="line">/dev/sdb       263174212   1465208 248270848   1% /</span><br><span class="line">tmpfs            9706744         0   9706744   0% /mnt/wsl</span><br><span class="line">tools          499207124 377409084 121798040  76% /init</span><br><span class="line">none             9704660         0   9704660   0% /dev</span><br><span class="line">none             9706744         4   9706740   1% /run</span><br><span class="line">none             9706744         0   9706744   0% /run/lock</span><br><span class="line">none             9706744         0   9706744   0% /run/shm</span><br><span class="line">none             9706744         0   9706744   0% /run/user</span><br><span class="line">tmpfs            9706744         0   9706744   0% /sys/fs/cgroup</span><br><span class="line">C:\            499207124 377409084 121798040  76% /mnt/c</span><br><span class="line">D:\            409599996 303194164 106405832  75% /mnt/d</span><br><span class="line">F:\            567158780 356728696 210430084  63% /mnt/f</span><br></pre></td></tr></tbody></table></figure>使用<code>df filename</code>指定文件夹显示磁盘使用信息：<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">kizaiwsl2@KIZAI-DESKTOP:/home$ ls</span><br><span class="line">kizaiwsl2  script  <span class="built_in">test</span></span><br><span class="line">kizaiwsl2@KIZAI-DESKTOP:/home$ df <span class="built_in">test</span>/</span><br><span class="line">Filesystem     1K-blocks    Used Available Use% Mounted on</span><br><span class="line">/dev/sdb       263174212 1465208 248270848   1% /</span><br><span class="line">kizaiwsl2@KIZAI-DESKTOP:/home$</span><br></pre></td></tr></tbody></table></figure>-h选项，通过它可以产生人类可读的格式df命令的输出：<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">kizaiwsl2@KIZAI-DESKTOP:/home$ df -h</span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/sdb        251G  1.4G  237G   1% /</span><br><span class="line">tmpfs           9.3G     0  9.3G   0% /mnt/wsl</span><br><span class="line">tools           477G  360G  117G  76% /init</span><br><span class="line">none            9.3G     0  9.3G   0% /dev</span><br><span class="line">none            9.3G  4.0K  9.3G   1% /run</span><br><span class="line">none            9.3G     0  9.3G   0% /run/lock</span><br><span class="line">none            9.3G     0  9.3G   0% /run/shm</span><br><span class="line">none            9.3G     0  9.3G   0% /run/user</span><br><span class="line">tmpfs           9.3G     0  9.3G   0% /sys/fs/cgroup</span><br><span class="line">C:\             477G  360G  117G  76% /mnt/c</span><br><span class="line">D:\             391G  290G  102G  75% /mnt/d</span><br><span class="line">F:\             541G  341G  201G  63% /mnt/f</span><br></pre></td></tr></tbody></table></figure><h2 id="sed命令："><a href="#sed命令：" class="headerlink" title="sed命令："></a>sed命令：</h2></li><li>sed 命令是利用脚本来处理文本文件。</li><li>sed 可依照脚本的指令来处理、编辑文本文件。</li><li>sed 主要用来自动编辑一个或多个文件、简化对文件的反复操作、编写转换程序等。<h3 id="语法：-1"><a href="#语法：-1" class="headerlink" title="语法："></a>语法：</h3><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">sed [-hnV][-e&lt;script&gt;][-f&lt;script文件&gt;][文本文件]</span><br></pre></td></tr></tbody></table></figure><h4 id="参数说明："><a href="#参数说明：" class="headerlink" title="参数说明："></a>参数说明：</h4></li></ul><ul><li>-e&lt;脚本&gt;或—expression=&lt;脚本&gt; 以选项中指定的script来处理输入的文本文件。</li><li>-f&lt;脚本&gt;或—file=&lt;脚本&gt; 以选项中指定的script文件来处理输入的文本文件。</li><li>-h或—help 显示帮助。</li><li>-n或—quiet或—silent 仅显示script处理后的结果。</li><li><p>-V或—version 显示版本信息。</p><h4 id="动作说明："><a href="#动作说明：" class="headerlink" title="动作说明："></a>动作说明：</h4></li><li><p>a ：新增， a 的后面可以接字串，而这些字串会在新的一行出现(目前的下一行)～</p></li><li>c ：取代， c 的后面可以接字串，这些字串可以取代 n1,n2 之间的行！</li><li>d ：删除，因为是删除啊，所以 d 后面通常不接任何咚咚；</li><li>i ：插入， i 的后面可以接字串，而这些字串会在新的一行出现(目前的上一行)；</li><li>p ：打印，亦即将某个选择的数据印出。通常 p 会与参数 sed -n 一起运行～</li><li>s ：取代，可以直接进行取代的工作哩！通常这个 s 的动作可以搭配正规表示法！例如 1,20s/old/new/g 就是啦！</li></ul><h3 id="实例：-1"><a href="#实例：-1" class="headerlink" title="实例："></a>实例：</h3><p>使用<code>vim test</code>新建一个test文件进行测试,输入<code>Hello Linux</code><br>再使用<code>cat test</code>查看内容<br></p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">kizaiwsl2@KIZAI-DESKTOP:/home/<span class="built_in">test</span>$ cat <span class="built_in">test</span></span><br><span class="line">Hello Linux</span><br></pre></td></tr></tbody></table></figure><br>在test文件的第一行后添加一行，并将结果输出到标准输出，在命令行提示符下输入如下命令：<br><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">sed -e 1a\newLine <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line">kizaiwsl2@KIZAI-DESKTOP:/home/<span class="built_in">test</span>$ sed -e 1a\newline <span class="built_in">test</span></span><br><span class="line">Hello Linux</span><br><span class="line">newline</span><br></pre></td></tr></tbody></table></figure><p></p><h4 id="数据的搜寻并显示"><a href="#数据的搜寻并显示" class="headerlink" title="数据的搜寻并显示"></a>数据的搜寻并显示</h4><p>例如：显示磁盘名称包含字母d的信息并使用-h人类可阅读方式打印出来：<br></p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">kizaiwsl2@KIZAI-DESKTOP:/home/<span class="built_in">test</span>$ df -h | sed -n <span class="string">'/d/p'</span></span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/sdb        251G  1.4G  237G   1% /</span><br><span class="line">none            9.3G     0  9.3G   0% /dev</span><br><span class="line">D:\             391G  290G  102G  75% /mnt/d</span><br></pre></td></tr></tbody></table></figure><p></p><h2 id="awk命令："><a href="#awk命令：" class="headerlink" title="awk命令："></a>awk命令：</h2><ul><li>AWK 是一种处理文本文件的语言，是一个强大的文本分析工具。</li><li>之所以叫 AWK 是因为其取了三位创始人 Alfred Aho，Peter Weinberger, 和 Brian Kernighan 的 Family Name 的首字符。<h3 id="语法：-2"><a href="#语法：-2" class="headerlink" title="语法："></a>语法：</h3><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">awk [选项参数] <span class="string">'script'</span> var=value file(s)</span><br><span class="line">或</span><br><span class="line">awk [选项参数] -f scriptfile var=value file(s)</span><br></pre></td></tr></tbody></table></figure><h4 id="选项参数说明："><a href="#选项参数说明：" class="headerlink" title="选项参数说明："></a>选项参数说明：</h4></li></ul><div class="table-container"><table><thead><tr><th style="text-align:left">命令</th><th>效果</th></tr></thead><tbody><tr><td style="text-align:left">-F fs or —field-separator fs</td><td>指定输入文件折分隔符，fs是一个字符串或者是一个正则表达式，如-F:。</td></tr><tr><td style="text-align:left">-v var=value or —asign var=value</td><td>赋值一个用户定义变量。</td></tr><tr><td style="text-align:left">-f scripfile or —file scriptfile</td><td>从脚本文件中读取awk命令。</td></tr><tr><td style="text-align:left">-mf nnn and -mr nnn</td><td>对nnn值设置内在限制，-mf选项限制分配给nnn的最大块数目；-mr选项限制记录的最大数目。这两个功能是Bell实验室版awk的扩展功能，在标准awk中不适用。</td></tr><tr><td style="text-align:left">-W compact or —compat, -W traditional or —traditional</td><td>在兼容模式下运行awk。所以gawk的行为和标准的awk完全一样，所有的awk扩展都被忽略。</td></tr><tr><td style="text-align:left">-W copyleft or —copyleft, -W copyright or —copyright</td><td>打印简短的版权信息。</td></tr><tr><td style="text-align:left">-W help or —help, -W usage or —usage</td><td>打印全部awk选项和每个选项的简短说明。</td></tr><tr><td style="text-align:left">-W lint or —lint</td><td>打印不能向传统unix平台移植的结构的警告。</td></tr><tr><td style="text-align:left">-W lint-old or —lint-old</td><td>打印关于不能向传统unix平台移植的结构的警告。</td></tr><tr><td style="text-align:left">-W posix</td><td>打开兼容模式。但有以下限制，不识别：/x、函数关键字、func、换码序列以及当fs是一个空格时，将新行作为一个域分隔符；操作符<strong>和</strong>=不能代替^和^=；fflush无效。</td></tr><tr><td style="text-align:left">-W re-interval or —re-inerval</td><td>允许间隔正则表达式的使用，参考(grep中的Posix字符类)，如括号表达式[[:alpha:]]。</td></tr><tr><td style="text-align:left">-W source program-text or —source program-text</td><td>使用program-text作为源代码，可与-f命令混用。</td></tr><tr><td style="text-align:left">-W version or —version</td><td>打印bug报告信息的版本。</td></tr></tbody></table></div><h3 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h3><div class="table-container"><table><thead><tr><th style="text-align:center">运算符</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">= += -= <em>= /= %= ^= *</em>=</td><td style="text-align:left">赋值</td></tr><tr><td style="text-align:center">?:</td><td style="text-align:left">C条件表达式</td></tr><tr><td style="text-align:center">&amp;&amp;</td><td style="text-align:left">逻辑与</td></tr><tr><td style="text-align:center">~ 和 !~</td><td style="text-align:left">匹配正则表达式和不匹配正则表达式</td></tr><tr><td style="text-align:center">&lt; &lt;= &gt; &gt;= != ==</td><td style="text-align:left">关系运算符</td></tr><tr><td style="text-align:center">空格</td><td style="text-align:left">连接</td></tr><tr><td style="text-align:center">+ -</td><td style="text-align:left">加，减</td></tr><tr><td style="text-align:center">* / %</td><td style="text-align:left">乘，除与求余</td></tr><tr><td style="text-align:center">+ - !</td><td style="text-align:left">一元加，减和逻辑非</td></tr><tr><td style="text-align:center">^ <em>*</em></td><td style="text-align:left">求幂</td></tr><tr><td style="text-align:center">++ —</td><td style="text-align:left">增加或减少，作为前缀或后缀</td></tr><tr><td style="text-align:center">$</td><td style="text-align:left">字段引用</td></tr><tr><td style="text-align:center">in</td><td style="text-align:left">数组成员</td></tr></tbody></table></div><h3 id="内建变量"><a href="#内建变量" class="headerlink" title="内建变量"></a>内建变量</h3><div class="table-container"><table><thead><tr><th style="text-align:left">变量</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:left">$n</td><td style="text-align:left">当前记录的第n个字段，字段间由FS分隔</td></tr><tr><td style="text-align:left">$0</td><td style="text-align:left">完整的输入记录</td></tr><tr><td style="text-align:left">ARGC</td><td style="text-align:left">命令行参数的数目</td></tr><tr><td style="text-align:left">ARGIND</td><td style="text-align:left">命令行中当前文件的位置(从0开始算)</td></tr><tr><td style="text-align:left">ARGV</td><td style="text-align:left">包含命令行参数的数组</td></tr><tr><td style="text-align:left">CONVFMT</td><td style="text-align:left">数字转换格式(默认值为%.6g)ENVIRON环境变量关联数组</td></tr><tr><td style="text-align:left">ERRNO</td><td style="text-align:left">最后一个系统错误的描述</td></tr><tr><td style="text-align:left">FIELDWIDTHS</td><td style="text-align:left">字段宽度列表(用空格键分隔)</td></tr><tr><td style="text-align:left">FILENAME</td><td style="text-align:left">当前文件名</td></tr><tr><td style="text-align:left">FNR</td><td style="text-align:left">各文件分别计数的行号</td></tr><tr><td style="text-align:left">FS</td><td style="text-align:left">字段分隔符(默认是任何空格)</td></tr><tr><td style="text-align:left">IGNORECASE</td><td style="text-align:left">如果为真，则进行忽略大小写的匹配</td></tr><tr><td style="text-align:left">NF</td><td style="text-align:left">一条记录的字段的数目</td></tr><tr><td style="text-align:left">NR</td><td style="text-align:left">已经读出的记录数，就是行号，从1开始</td></tr><tr><td style="text-align:left">OFMT</td><td style="text-align:left">数字的输出格式(默认值是%.6g)</td></tr><tr><td style="text-align:left">OFS</td><td style="text-align:left">输出字段分隔符，默认值与输入字段分隔符一致。</td></tr><tr><td style="text-align:left">ORS</td><td style="text-align:left">输出记录分隔符(默认值是一个换行符)</td></tr><tr><td style="text-align:left">RLENGTH</td><td style="text-align:left">由match函数所匹配的字符串的长度</td></tr><tr><td style="text-align:left">RS</td><td style="text-align:left">记录分隔符(默认是一个换行符)</td></tr><tr><td style="text-align:left">RSTART</td><td style="text-align:left">由match函数所匹配的字符串的第一个位置</td></tr><tr><td style="text-align:left">SUBSEP</td><td style="text-align:left">数组下标分隔符(默认值是/034)</td></tr></tbody></table></div><h3 id="实例：-2"><a href="#实例：-2" class="headerlink" title="实例："></a>实例：</h3><h4 id="打印文件Gitlab-Runner-company-tech-doc-DevOps-Doc-Shell-Shell-Example-test-csv中所有的行，不指定任何模式："><a href="#打印文件Gitlab-Runner-company-tech-doc-DevOps-Doc-Shell-Shell-Example-test-csv中所有的行，不指定任何模式：" class="headerlink" title="打印文件Gitlab-Runner/company-tech-doc/DevOps_Doc/Shell/Shell_Example/test.csv中所有的行，不指定任何模式："></a>打印文件Gitlab-Runner/company-tech-doc/DevOps_Doc/Shell/Shell_Example/test.csv中所有的行，不指定任何模式：</h4><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">lemu-devops@lemudevops:~/Gitlab-Runner/company-tech-doc/DevOps_Doc/Shell/Shell_Example$ awk <span class="string">'//{print}'</span> test.csv </span><br><span class="line">created_date,filesname,size,used,avail,file_number</span><br><span class="line">2021-08-10,Lemu_Tech,5000,100,4900,600</span><br><span class="line">2021-08-10,Lemu_Admin,2000,100,1900,50</span><br><span class="line">2021-08-10，Lemu_DevOps,1700,100,1600,20</span><br><span class="line">2021-08-11,Lemu_Tech,5000,150,4850,700 </span><br><span class="line">2021-08-11,Lemu_Admin,2000,140,1860,100</span><br><span class="line">2021-08-11,Lemu_DevOps,1700,130,1570,50</span><br><span class="line">2021-08-12,Lemu_Tech,5000,300,4700,1000</span><br><span class="line">2021-08-12,Lemu_Admin,2000,200,1800,200</span><br><span class="line">2021-08-12,Lemu_DevOps,1700,250,1450,100</span><br><span class="line">2021-08-13,Lemu_Tech,5000,500,4500,1500</span><br><span class="line">2021-08-13,Lemu_Admin,2000,300,1700,300 </span><br><span class="line">2021-08-13,Lemu_DevOps,1700,500,1200,300</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h4 id="指定匹配Lemu-Tech模式，因此awk匹配文件test-csv中的Lemu-Tech的那些行："><a href="#指定匹配Lemu-Tech模式，因此awk匹配文件test-csv中的Lemu-Tech的那些行：" class="headerlink" title="指定匹配Lemu_Tech模式，因此awk匹配文件test.csv中的Lemu_Tech的那些行："></a>指定匹配<code>Lemu_Tech</code>模式，因此awk匹配文件test.csv中的<code>Lemu_Tech</code>的那些行：</h4><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">lemu-devops@lemudevops:~/Gitlab-Runner/company-tech-doc/DevOps_Doc/Shell/Shell_Example$ awk <span class="string">'/Lemu_Tech/{print}'</span> test.csv </span><br><span class="line">2021-08-10,Lemu_Tech,5000,100,4900,600</span><br><span class="line">2021-08-11,Lemu_Tech,5000,150,4850,700 </span><br><span class="line">2021-08-12,Lemu_Tech,5000,300,4700,1000</span><br><span class="line">2021-08-13,Lemu_Tech,5000,500,4500,1500</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h4 id="使用通配符-我这里用它来匹配包含：A、Ad、Admin的字符串："><a href="#使用通配符-我这里用它来匹配包含：A、Ad、Admin的字符串：" class="headerlink" title="使用通配符(.),我这里用它来匹配包含：A、Ad、Admin的字符串："></a>使用通配符<code>(.)</code>,我这里用它来匹配包含：A、Ad、Admin的字符串：</h4><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">lemu-devops@lemudevops:~/Gitlab-Runner/company-tech-doc/DevOps_Doc/Shell/Shell_Example$ awk <span class="string">'/.Ad/{print}'</span> test.csv </span><br><span class="line">2021-08-10,Lemu_Admin,2000,100,1900,50</span><br><span class="line">2021-08-11,Lemu_Admin,2000,140,1860,100</span><br><span class="line">2021-08-12,Lemu_Admin,2000,200,1800,200</span><br><span class="line">2021-08-13,Lemu_Admin,2000,300,1700,300 </span><br></pre></td></tr></tbody></table></figure><h4 id="结合结合集合-character-s-使用-awk进行匹配，下面打印含有以l、d、D、o字符的数据："><a href="#结合结合集合-character-s-使用-awk进行匹配，下面打印含有以l、d、D、o字符的数据：" class="headerlink" title="结合结合集合 [ character(s) ] 使用 awk进行匹配，下面打印含有以l、d、D、o字符的数据："></a>结合结合集合 [ character(s) ] 使用 awk进行匹配，下面打印含有以<code>l</code>、<code>d</code>、<code>D</code>、<code>o</code>字符的数据：</h4><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">lemu-devops@lemudevops:~/Gitlab-Runner/company-tech-doc/DevOps_Doc/Shell/Shell_Example$ awk <span class="string">'/[ldDo]/{print}'</span> test.csv</span><br><span class="line">created_date,filesname,size,used,avail,file_number</span><br><span class="line">2021-08-10,Lemu_Admin,2000,100,1900,50</span><br><span class="line">2021-08-10，Lemu_DevOps,1700,100,1600,20</span><br><span class="line">2021-08-11,Lemu_Admin,2000,140,1860,100</span><br><span class="line">2021-08-11,Lemu_DevOps,1700,130,1570,50</span><br><span class="line">2021-08-12,Lemu_Admin,2000,200,1800,200</span><br><span class="line">2021-08-12,Lemu_DevOps,1700,250,1450,100</span><br><span class="line">2021-08-13,Lemu_Admin,2000,300,1700,300</span><br><span class="line">2021-08-13,Lemu_DevOps,1700,500,1200,300</span><br></pre></td></tr></tbody></table></figure><h4 id="计算文件大小："><a href="#计算文件大小：" class="headerlink" title="计算文件大小："></a>计算文件大小：</h4><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 计算该目录下.csv文件的大小</span></span><br><span class="line">lemu-devops@lemudevops:~/GitLab-Runner/company-tech-doc/DevOps_Doc/Shell/Shell_Example$ ls -l *.csv | awk <span class="string">'{sum+=$5} END {print sum}'</span></span><br><span class="line">549</span><br><span class="line"></span><br><span class="line"><span class="comment"># 计算该目录下.sh文件的大小</span></span><br><span class="line">lemu-devops@lemudevops:~/GitLab-Runner/company-tech-doc/DevOps_Doc/Shell/Shell_Example$ ls -l *.sh | awk <span class="string">'{sum+=$5} END {print sum}'</span></span><br><span class="line">3152</span><br></pre></td></tr></tbody></table></figure><h2 id="正则表达式："><a href="#正则表达式：" class="headerlink" title="正则表达式："></a>正则表达式：</h2><ul><li>正则表达式(regular expression)描述了一种字符串匹配的模式（pattern），可以用来检查一个串是否含有某种子串、将匹配的子串替换或者从某个串中取出符合某个条件的子串等。</li><li>正则表达式是由普通字符（例如字符 a 到 z）以及特殊字符（称为”元字符”）组成的文字模式。模式描述在搜索文本时要匹配的一个或多个字符串。正则表达式作为一个模板，将某个字符模式与所搜索的字符串进行匹配。<h3 id="普通字符："><a href="#普通字符：" class="headerlink" title="普通字符："></a>普通字符：</h3>| 字符   | 描述                                                                                                             |<br>|:———-|:————————————————————————————————————————————————————————-|<br>| [ABC]  | 匹配 […] 中的所有字符，例如 [aeiou] 匹配字符串 “google runoob taobao” 中所有的 e o u a 字母。                  |<br>| <sup><a href="#fn_ABC" id="reffn_ABC">ABC</a></sup> | 匹配除了 […] 中字符的所有字符，例如 <sup><a href="#fn_aeiou" id="reffn_aeiou">aeiou</a></sup> 匹配字符串 “google runoob taobao” 中除了 e o u a 字母的所有字母。 |<br>| [A-Z]  | [A-Z] 表示一个区间，匹配所有大写字母，[a-z] 表示所有小写字母。                                                   |<br>| .      | 匹配除换行符（\n、\r）之外的任何单个字符，相等于 <sup><a href="#fn_\n\r" id="reffn_\n\r">\n\r</a></sup>。                                                       |<br>| [\s\S] | 匹配所有。\s 是匹配所有空白符，包括换行，\S 非空白符，不包括换行。                                               |<br>| \w     | 匹配字母、数字、下划线。等价于 [A-Za-z0-9_]                                                                      |</li></ul><h3 id="非打印字符："><a href="#非打印字符：" class="headerlink" title="非打印字符："></a>非打印字符：</h3><div class="table-container"><table><thead><tr><th style="text-align:left">字符</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:left">\cx</td><td style="text-align:left">匹配由x指明的控制字符。例如， \cM 匹配一个 Control-M 或回车符。x 的值必须为 A-Z 或 a-z 之一。否则，将 c 视为一个原义的 ‘c’ 字符。</td></tr><tr><td style="text-align:left">\f</td><td style="text-align:left">匹配一个换页符。等价于 \x0c 和 \cL。</td></tr><tr><td style="text-align:left">\n</td><td style="text-align:left">匹配一个换行符。等价于 \x0a 和 \cJ。</td></tr><tr><td style="text-align:left">\r</td><td style="text-align:left">匹配一个回车符。等价于 \x0d 和 \cM。</td></tr><tr><td style="text-align:left">\s</td><td style="text-align:left">匹配任何空白字符，包括空格、制表符、换页符等等。等价于 [ \f\n\r\t\v]。注意 Unicode 正则表达式会匹配全角空格符。</td></tr><tr><td style="text-align:left">\S</td><td style="text-align:left">匹配任何非空白字符。等价于 <sup><a href="#fn_ \f\n\r\t\v" id="reffn_ \f\n\r\t\v"> \f\n\r\t\v</a></sup>。</td></tr><tr><td style="text-align:left">\t</td><td style="text-align:left">匹配一个制表符。等价于 \x09 和 \cI。</td></tr><tr><td style="text-align:left">\v</td><td style="text-align:left">匹配一个垂直制表符。等价于 \x0b 和 \cK。</td></tr></tbody></table></div><h3 id="特殊字符"><a href="#特殊字符" class="headerlink" title="特殊字符"></a>特殊字符</h3><div class="table-container"><table><thead><tr><th style="text-align:left">特别字符</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:left">$</td><td style="text-align:left">匹配输入字符串的结尾位置。如果设置了 RegExp 对象的 Multiline 属性，则 $ 也匹配 ‘\n’ 或 ‘\r’。要匹配 $ 字符本身，请使用 \$。</td></tr><tr><td style="text-align:left">( )</td><td style="text-align:left">标记一个子表达式的开始和结束位置。子表达式可以获取供以后使用。要匹配这些字符，请使用 ( 和 )。</td></tr><tr><td style="text-align:left">*</td><td style="text-align:left">匹配前面的子表达式零次或多次。要匹配 <em> 字符，请使用 \</em>。</td></tr><tr><td style="text-align:left">+</td><td style="text-align:left">匹配前面的子表达式一次或多次。要匹配 + 字符，请使用 +。</td></tr><tr><td style="text-align:left">.</td><td style="text-align:left">匹配除换行符 \n 之外的任何单字符。要匹配 . ，请使用 . 。</td></tr><tr><td style="text-align:left">[</td><td style="text-align:left">标记一个中括号表达式的开始。要匹配 [，请使用 [。</td></tr><tr><td style="text-align:left">?</td><td style="text-align:left">匹配前面的子表达式零次或一次，或指明一个非贪婪限定符。要匹配 ? 字符，请使用 \?。</td></tr><tr><td style="text-align:left">\</td><td style="text-align:left">将下一个字符标记为或特殊字符、或原义字符、或向后引用、或八进制转义符。例如， ‘n’ 匹配字符 ‘n’。’\n’ 匹配换行符。序列 ‘\\’ 匹配 “\”，而 ‘(‘ 则匹配 “(“。</td></tr><tr><td style="text-align:left">^</td><td style="text-align:left">匹配输入字符串的开始位置，除非在方括号表达式中使用，当该符号在方括号表达式中使用时，表示不接受该方括号表达式中的字符集合。要匹配 ^ 字符本身，请使用 \^。</td></tr><tr><td style="text-align:left">{</td><td style="text-align:left">标记限定符表达式的开始。要匹配 {，请使用 {。</td></tr><tr><td style="text-align:left"></td></tr></tbody></table></div><h3 id="限定符"><a href="#限定符" class="headerlink" title="限定符"></a>限定符</h3><div class="table-container"><table><thead><tr><th style="text-align:left">字符</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:left">*</td><td style="text-align:left">匹配前面的子表达式零次或多次。例如，zo<em> 能匹配 “z” 以及 “zoo”。</em> 等价于{0,}。</td></tr><tr><td style="text-align:left">+</td><td style="text-align:left">匹配前面的子表达式一次或多次。例如，’zo+’ 能匹配 “zo” 以及 “zoo”，但不能匹配 “z”。+ 等价于 {1,}。</td></tr><tr><td style="text-align:left">?</td><td style="text-align:left">匹配前面的子表达式零次或一次。例如，”do(es)?” 可以匹配 “do” 、 “does” 中的 “does” 、 “doxy” 中的 “do” 。? 等价于 {0,1}。</td></tr><tr><td style="text-align:left">{n}</td><td style="text-align:left">n 是一个非负整数。匹配确定的 n 次。例如，’o{2}’ 不能匹配 “Bob” 中的 ‘o’，但是能匹配 “food” 中的两个 o。</td></tr><tr><td style="text-align:left">{n,}</td><td style="text-align:left">n 是一个非负整数。至少匹配n 次。例如，’o{2,}’ 不能匹配 “Bob” 中的 ‘o’，但能匹配 “foooood” 中的所有 o。’o{1,}’ 等价于 ‘o+’。’o{0,}’ 则等价于 ‘o*’。</td></tr><tr><td style="text-align:left">{n,m}</td><td style="text-align:left">m 和 n 均为非负整数，其中n &lt;= m。最少匹配 n 次且最多匹配 m 次。例如，”o{1,3}” 将匹配 “fooooood” 中的前三个 o。’o{0,1}’ 等价于 ‘o?’。请注意在逗号和两个数之间不能有空格。</td></tr></tbody></table></div><h3 id="定位符："><a href="#定位符：" class="headerlink" title="定位符："></a>定位符：</h3><div class="table-container"><table><thead><tr><th style="text-align:left">字符</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:left">^</td><td style="text-align:left">匹配输入字符串开始的位置。如果设置了 RegExp 对象的 Multiline 属性，^ 还会与 \n 或 \r 之后的位置匹配。</td></tr><tr><td style="text-align:left">$</td><td style="text-align:left">匹配输入字符串结尾的位置。如果设置了 RegExp 对象的 Multiline 属性，$ 还会与 \n 或 \r 之前的位置匹配。</td></tr><tr><td style="text-align:left">\b</td><td style="text-align:left">匹配一个单词边界，即字与空格间的位置。</td></tr><tr><td style="text-align:left">\B</td><td style="text-align:left">非单词边界匹配。</td></tr></tbody></table></div><h2 id="du命令"><a href="#du命令" class="headerlink" title="du命令"></a>du命令</h2><ul><li>Linux du （英文全拼：disk usage）命令用于显示目录或文件的大小。</li><li>du 会显示指定的目录或文件所占用的磁盘空间。</li></ul><h3 id="语法：-3"><a href="#语法：-3" class="headerlink" title="语法："></a>语法：</h3><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">du [-abcDhHklmsSx][-L &lt;符号连接&gt;][-X &lt;文件&gt;][--block-size][--exclude=&lt;目录或文件&gt;][--max-depth=&lt;目录层数&gt;][--<span class="built_in">help</span>][--version][目录或文件]</span><br></pre></td></tr></tbody></table></figure><h4 id="参数说明：-1"><a href="#参数说明：-1" class="headerlink" title="参数说明："></a>参数说明：</h4><div class="table-container"><table><thead><tr><th style="text-align:left">参数</th><th>功能</th></tr></thead><tbody><tr><td style="text-align:left">-a或-all</td><td>显示目录中个别文件的大小。</td></tr><tr><td style="text-align:left">-b或-bytes</td><td>显示目录或文件大小时，以byte为单位。</td></tr><tr><td style="text-align:left">-c或—total</td><td>除了显示个别目录或文件的大小外，同时也显示所有目录或文件的总和。</td></tr><tr><td style="text-align:left">-D或—dereference-args</td><td>显示指定符号连接的源文件大小。</td></tr><tr><td style="text-align:left">-h或—human-readable</td><td>以K，M，G为单位，提高信息的可读性。</td></tr><tr><td style="text-align:left">-H或—si</td><td>与-h参数相同，但是K，M，G是以1000为换算单位。</td></tr><tr><td style="text-align:left">-k或—kilobytes</td><td>以1024 bytes为单位。</td></tr><tr><td style="text-align:left">-l或—count-links</td><td>重复计算硬件连接的文件。</td></tr><tr><td style="text-align:left">-L&lt;符号连接&gt;或—dereference&lt;符号连接&gt;</td><td>显示选项中所指定符号连接的源文件大小。</td></tr><tr><td style="text-align:left">-m或—megabytes</td><td>以1MB为单位。</td></tr><tr><td style="text-align:left">-s或—summarize</td><td>仅显示总计。</td></tr><tr><td style="text-align:left">-S或—separate-dirs</td><td>显示个别目录的大小时，并不含其子目录的大小。</td></tr><tr><td style="text-align:left">-x或—one-file-xystem</td><td>以一开始处理时的文件系统为准，若遇上其它不同的文件系统目录则略过。</td></tr><tr><td style="text-align:left">-X&lt;文件&gt;或—exclude-from=&lt;文件&gt;</td><td>在&lt;文件&gt;指定目录或文件。</td></tr><tr><td style="text-align:left">—exclude=&lt;目录或文件&gt;</td><td>略过指定的目录或文件。</td></tr><tr><td style="text-align:left">—max-depth=&lt;目录层数&gt;</td><td>超过指定层数的目录后，予以忽略。</td></tr><tr><td style="text-align:left">—help</td><td>显示帮助。</td></tr><tr><td style="text-align:left">—version</td><td>显示版本信息。</td></tr></tbody></table></div><h3 id="实例：-3"><a href="#实例：-3" class="headerlink" title="实例："></a>实例：</h3><h4 id="显示DevOps文件夹和文件的所占空间，使用人类可读性的方式："><a href="#显示DevOps文件夹和文件的所占空间，使用人类可读性的方式：" class="headerlink" title="显示DevOps文件夹和文件的所占空间，使用人类可读性的方式："></a>显示DevOps文件夹和文件的所占空间，使用人类可读性的方式：</h4><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">lemu-devops@lemudevops:~/Gitlab-Runner/company-tech-doc/DevOps_Doc$ du -h</span><br><span class="line">14M./NAS/NAS技术文件</span><br><span class="line">292K./NAS/NAS学习文档笔记</span><br><span class="line">24K./NAS/NAS操作记录文档</span><br><span class="line">12K./NAS/NAS遇到的问题</span><br><span class="line">56K./NAS/NAS管理员文档</span><br><span class="line">14M./NAS</span><br><span class="line">32K./Shell/20210728</span><br><span class="line">124K./Shell/Shell_Example</span><br><span class="line">180K./Shell</span><br><span class="line">14M.</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h4 id="显示指定文件的大小："><a href="#显示指定文件的大小：" class="headerlink" title="显示指定文件的大小："></a>显示指定文件的大小：</h4><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">lemu-devops@lemudevops:~/Gitlab-Runner/company-tech-doc/DevOps_Doc$ du -h 每日工作计划.md</span><br><span class="line">12K每日工作计划.md</span><br></pre></td></tr></tbody></table></figure><h2 id="grep命令："><a href="#grep命令：" class="headerlink" title="grep命令："></a>grep命令：</h2><ul><li>Linux grep 命令用于查找文件里符合条件的字符串。</li><li>grep 指令用于查找内容包含指定的范本样式的文件，如果发现某文件的内容符合所指定的范本样式，预设 grep 指令会把含有范本样式的那一列显示出来。若不指定任何文件名称，或是所给予的文件名为 -，则 grep 指令会从标准输入设备读取数据。</li></ul><h3 id="语法：-4"><a href="#语法：-4" class="headerlink" title="语法："></a>语法：</h3><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">grep [-abcEFGhHilLnqrsvVwxy][-A&lt;显示行数&gt;][-B&lt;显示列数&gt;][-C&lt;显示列数&gt;][-d&lt;进行动作&gt;][-e&lt;范本样式&gt;][-f&lt;范本文件&gt;][--<span class="built_in">help</span>][范本样式][文件或目录...]</span><br></pre></td></tr></tbody></table></figure><h4 id="参数说明"><a href="#参数说明" class="headerlink" title="参数说明"></a>参数说明</h4><div class="table-container"><table><thead><tr><th style="text-align:left">参数</th><th>功能</th></tr></thead><tbody><tr><td style="text-align:left">-a 或 —text</td><td>不要忽略二进制的数据。</td></tr><tr><td style="text-align:left">-A&lt;显示行数&gt; 或 —after-context=&lt;显示行数&gt;</td><td>除了显示符合范本样式的那一列之外，并显示该行之后的内容。</td></tr><tr><td style="text-align:left">-b 或 —byte-offset</td><td>在显示符合样式的那一行之前，标示出该行第一个字符的编号。</td></tr><tr><td style="text-align:left">-B&lt;显示行数&gt; 或 —before-context=&lt;显示行数&gt;</td><td>除了显示符合样式的那一行之外，并显示该行之前的内容。</td></tr><tr><td style="text-align:left">-c 或 —count</td><td>计算符合样式的列数。</td></tr><tr><td style="text-align:left">-C&lt;显示行数&gt; 或 —context=&lt;显示行数&gt;或-&lt;显示行数&gt;</td><td>除了显示符合样式的那一行之外，并显示该行之前后的内容。</td></tr><tr><td style="text-align:left">-d &lt;动作&gt; 或 —directories=&lt;动作&gt;</td><td>当指定要查找的是目录而非文件时，必须使用这项参数，否则grep指令将回报信息并停止动作。</td></tr><tr><td style="text-align:left">-e&lt;范本样式&gt; 或 —regexp=&lt;范本样式&gt;</td><td>指定字符串做为查找文件内容的样式。</td></tr><tr><td style="text-align:left">-E 或 —extended-regexp</td><td>将样式为延伸的正则表达式来使用。</td></tr><tr><td style="text-align:left">-f&lt;规则文件&gt; 或 —file=&lt;规则文件&gt;</td><td>指定规则文件，其内容含有一个或多个规则样式，让grep查找符合规则条件的文件内容，格式为每行一个规则样式。</td></tr><tr><td style="text-align:left">-F 或 —fixed-regexp</td><td>将样式视为固定字符串的列表。</td></tr><tr><td style="text-align:left">-G 或 —basic-regexp</td><td>将样式视为普通的表示法来使用。</td></tr><tr><td style="text-align:left">-h 或 —no-filename</td><td>在显示符合样式的那一行之前，不标示该行所属的文件名称。</td></tr><tr><td style="text-align:left">-H 或 —with-filename</td><td>在显示符合样式的那一行之前，表示该行所属的文件名称。</td></tr><tr><td style="text-align:left">-i 或 —ignore-case</td><td>忽略字符大小写的差别。</td></tr><tr><td style="text-align:left">-l 或 —file-with-matches</td><td>列出文件内容符合指定的样式的文件名称。</td></tr><tr><td style="text-align:left">-L 或 —files-without-match</td><td>列出文件内容不符合指定的样式的文件名称。</td></tr><tr><td style="text-align:left">-n 或 —line-number</td><td>在显示符合样式的那一行之前，标示出该行的列数编号。</td></tr><tr><td style="text-align:left">-o 或 —only-matching</td><td>只显示匹配PATTERN 部分。</td></tr><tr><td style="text-align:left">-q 或 —quiet或—silent</td><td>不显示任何信息。</td></tr><tr><td style="text-align:left">-r 或 —recursive</td><td>此参数的效果和指定”-d recurse”参数相同。</td></tr><tr><td style="text-align:left">-s 或 —no-messages</td><td>不显示错误信息。</td></tr><tr><td style="text-align:left">-v 或 —invert-match</td><td>显示不包含匹配文本的所有行。</td></tr><tr><td style="text-align:left">-V 或 —version</td><td>显示版本信息。</td></tr><tr><td style="text-align:left">-w 或 —word-regexp</td><td>只显示全字符合的列。</td></tr><tr><td style="text-align:left">-x —line-regexp</td><td>只显示全列符合的列。</td></tr><tr><td style="text-align:left">-y</td><td>此参数的效果和指定”-i”参数相同。</td></tr></tbody></table></div><h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><h4 id="在目录文件下查找后缀csv字样的文件包含date字符串字符串。"><a href="#在目录文件下查找后缀csv字样的文件包含date字符串字符串。" class="headerlink" title="在目录文件下查找后缀csv字样的文件包含date字符串字符串。"></a>在目录文件下查找后缀<code>csv</code>字样的文件包含<code>date</code>字符串字符串。</h4><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">lemu-devops@lemudevops:~/Gitlab-Runner/company-tech-doc/DevOps_Doc/Shell/Shell_Example$ grep date *csv</span><br><span class="line">lmadmin.csv:created_date,filesname,size,used,avail,file_number</span><br><span class="line">lmdevops.csv:created_date,filesname,size,used,avail,file_number</span><br><span class="line">lmtechtest.csv:created_date,filesname,size,used,avail,file_number</span><br></pre></td></tr></tbody></table></figure><h4 id="以递归方式查找符合条件的文件。查找指定目录下所有文件中包含used的文件，并打印该字符串所在行的内容。"><a href="#以递归方式查找符合条件的文件。查找指定目录下所有文件中包含used的文件，并打印该字符串所在行的内容。" class="headerlink" title="以递归方式查找符合条件的文件。查找指定目录下所有文件中包含used的文件，并打印该字符串所在行的内容。"></a>以递归方式查找符合条件的文件。查找指定目录下所有文件中包含<code>used</code>的文件，并打印该字符串所在行的内容。</h4><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">lemu-devops@lemudevops:~/Gitlab-Runner/company-tech-doc/DevOps_Doc/Shell/Shell_Example$ grep -r date</span><br><span class="line">GetFIleList.sh:d=`date -d <span class="string">"-5 min"</span> +%Y%m%d%H%M`</span><br><span class="line">Shell监控用户操作轨迹.md:        <span class="built_in">exec</span> /usr/bin/script -t 2&gt;/var/<span class="built_in">log</span>/script/<span class="variable">$USER</span>-<span class="variable">$UID</span>-`date +%Y%m%d%H%M`.date -a -f -q /var/<span class="built_in">log</span>/script/<span class="variable">$USER</span>-<span class="variable">$UID</span>-`date +%Y%m%d%H%M`.<span class="built_in">log</span></span><br><span class="line">Shell监控用户操作轨迹.md:-rw-rw-r--  1 lemu001 lemu001   12 7月  31 20:00 lemu001-1000-202107311949.date</span><br><span class="line">Shell监控用户操作轨迹.md:-rw-rw-r--  1 lemu001 lemu001  229 7月  31 20:06 lemu001-1000-202107311950.date</span><br><span class="line">Shell监控用户操作轨迹.md:lemu001@lemu-devops:/var/<span class="built_in">log</span>/script$ scriptreplay lemu001-1000-202107311950.date  lemu001-1000-202107311950.log </span><br><span class="line">cron定时脚本设计文档.md:<span class="comment"># print system date 1min</span></span><br><span class="line">cron定时脚本设计文档.md:* * * * * <span class="built_in">echo</span> “$(date)“ &gt;&gt; /var/<span class="built_in">log</span>/cronlog/cronsysdate.log</span><br><span class="line">cron定时脚本设计文档.md:<span class="comment"># print system date 1min</span></span><br><span class="line">cron定时脚本设计文档.md:* * * * * <span class="built_in">echo</span> “$(date)” &gt;&gt; /var/<span class="built_in">log</span>/cronlog/cronsysdate.log </span><br><span class="line">cron定时脚本设计文档.md:lemu-devops@lemudevops:/$ tail -f cronsysdate.log</span><br><span class="line">lmadmin.csv:created_date,filesname,size,used,avail,file_number</span><br><span class="line">NAS监视器设计文档.md:created_date,filesname,size,used,avail,file_number</span><br><span class="line">NAS监视器设计文档.md:created_date,filesname,size,used,avail,file_number</span><br><span class="line">NAS监视器设计文档.md:created_date,filesname,size,used,avail,file_number</span><br><span class="line">StaLogSize.sh:t=`date +%H`</span><br><span class="line">StaLogSize.sh:d=`date +%F-%H`</span><br><span class="line">df-sed-awk-du-grep.md:created_date,filesname,size,used,avail,file_number</span><br><span class="line">df-sed-awk-du-grep.md:created_date,filesname,size,used,avail,file_number</span><br><span class="line">df-sed-awk-du-grep.md:<span class="comment">#### 在目录文件下查找后缀```csv```字样的文件包含```date```字符串字符串。</span></span><br><span class="line">df-sed-awk-du-grep.md:lemu-devops@lemudevops:~/Gitlab-Runner/company-tech-doc/DevOps_Doc/Shell/Shell_Example$ grep date *csv</span><br><span class="line">df-sed-awk-du-grep.md:lmadmin.csv:created_date,filesname,size,used,avail,file_number</span><br><span class="line">df-sed-awk-du-grep.md:lmdevops.csv:created_date,filesname,size,used,avail,file_number</span><br><span class="line">df-sed-awk-du-grep.md:lmtechtest.csv:created_date,filesname,size,used,avail,file_number</span><br><span class="line">mkdirdate.sh: <span class="keyword">if</span> [ ! -d <span class="string">"<span class="subst">$(pwd)</span>/<span class="subst">$(date +%Y-%m-%d)</span>"</span>]; <span class="keyword">then</span></span><br><span class="line">mkdirdate.sh: touch $(<span class="built_in">pwd</span>)/$(date +%Y-%m-%d)</span><br><span class="line">lmtechtest.csv:created_date,filesname,size,used,avail,file_number</span><br><span class="line">lmdevops.csv:created_date,filesname,size,used,avail,file_number</span><br></pre></td></tr></tbody></table></figure><h4 id="反向查找。前面各个例子是查找并打印出符合条件的行，通过”-v”参数可以打印出不符合条件行的内容。现在查找文件名中包含csv的文件不包含date的行："><a href="#反向查找。前面各个例子是查找并打印出符合条件的行，通过”-v”参数可以打印出不符合条件行的内容。现在查找文件名中包含csv的文件不包含date的行：" class="headerlink" title="反向查找。前面各个例子是查找并打印出符合条件的行，通过”-v”参数可以打印出不符合条件行的内容。现在查找文件名中包含csv的文件不包含date的行："></a>反向查找。前面各个例子是查找并打印出符合条件的行，通过”-v”参数可以打印出不符合条件行的内容。现在查找文件名中包含<code>csv</code>的文件不包含<code>date</code>的行：</h4><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">lemu-devops@lemudevops:~/Gitlab-Runner/company-tech-doc/DevOps_Doc/Shell/Shell_Example$ grep -v date *csv</span><br><span class="line">lmadmin.csv:2021-08-10,Lemu_Admin,2000,100,1900,50</span><br><span class="line">lmadmin.csv:2021-08-11,Lemu_Admin,2000,140,1860,100</span><br><span class="line">lmadmin.csv:2021-08-12,Lemu_Admin,2000,200,1800,200</span><br><span class="line">lmadmin.csv:2021-08-13,Lemu_Admin,2000,300,1700,300 </span><br><span class="line">lmdevops.csv:2021-08-10,Lemu_DevOps,1700,100,1600,20</span><br><span class="line">lmdevops.csv:2021-08-11,Lemu_DevOps,1700,130,1570,50</span><br><span class="line">lmdevops.csv:2021-08-12,Lemu_DevOps,1700,250,1450,100 </span><br><span class="line">lmdevops.csv:2021-08-13,Lemu_DevOps,1700,500,1200,300</span><br><span class="line">lmtechtest.csv:2021-08-10,Lemu_Tech,5000,100,4900,600</span><br><span class="line">lmtechtest.csv:2021-08-11,Lemu_Tech,5000,150,4850,700 </span><br><span class="line">lmtechtest.csv:2021-08-12,Lemu_Tech,5000,300,4700,1000</span><br><span class="line">lmtechtest.csv:2021-08-13,Lemu_Tech,5000,500,4500,1500</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h4 id="使用正则表达式匹配文件内容：匹配字母a-u的内容打印出来"><a href="#使用正则表达式匹配文件内容：匹配字母a-u的内容打印出来" class="headerlink" title="使用正则表达式匹配文件内容：匹配字母a-u的内容打印出来"></a>使用正则表达式匹配文件内容：匹配字母a-u的内容打印出来</h4><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">lemu-devops@lemudevops:~/Gitlab-Runner/company-tech-doc/DevOps_Doc/Shell/Shell_Example$ grep -e <span class="string">"[a-u]"</span> *csv*</span><br><span class="line">lmadmin.csv:created_date,filesname,size,used,avail,file_number</span><br><span class="line">lmadmin.csv:2021-08-10,Lemu_Admin,2000,100,1900,50</span><br><span class="line">lmadmin.csv:2021-08-11,Lemu_Admin,2000,140,1860,100</span><br><span class="line">lmadmin.csv:2021-08-12,Lemu_Admin,2000,200,1800,200</span><br><span class="line">lmadmin.csv:2021-08-13,Lemu_Admin,2000,300,1700,300 </span><br><span class="line">lmdevops.csv:created_date,filesname,size,used,avail,file_number</span><br><span class="line">lmdevops.csv:2021-08-10,Lemu_DevOps,1700,100,1600,20</span><br><span class="line">lmdevops.csv:2021-08-11,Lemu_DevOps,1700,130,1570,50</span><br><span class="line">lmdevops.csv:2021-08-12,Lemu_DevOps,1700,250,1450,100 </span><br><span class="line">lmdevops.csv:2021-08-13,Lemu_DevOps,1700,500,1200,300</span><br><span class="line">lmtechtest.csv:created_date,filesname,size,used,avail,file_number</span><br><span class="line">lmtechtest.csv:2021-08-10,Lemu_Tech,5000,100,4900,600</span><br><span class="line">lmtechtest.csv:2021-08-11,Lemu_Tech,5000,150,4850,700 </span><br><span class="line">lmtechtest.csv:2021-08-12,Lemu_Tech,5000,300,4700,1000</span><br><span class="line">lmtechtest.csv:2021-08-13,Lemu_Tech,5000,500,4500,1500</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h3 id="其他示例："><a href="#其他示例：" class="headerlink" title="其他示例："></a>其他示例：</h3><div class="table-container"><table><thead><tr><th style="text-align:left">正则表达式</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:left">/\b([a-z]+) \1\b/gi</td><td style="text-align:left">一个单词连续出现的位置。</td></tr><tr><td style="text-align:left">/(\w+):\/\/(<sup><a href="#fn_/:" id="reffn_/:">/:</a></sup>+)(:\d<em>)?(<sup><a href="#fn_# " id="reffn_# "># </a></sup></em>)/</td><td style="text-align:left">将一个URL解析为协议、域、端口及相对路径。</td></tr><tr><td style="text-align:left">/^(?:Chapter</td><td style="text-align:left">Section) [1-9][0-9]{0,1}$/</td><td>定位章节的位置。</td></tr><tr><td style="text-align:left">/[-a-z]/</td><td style="text-align:left">a至z共26个字母再加一个-号。</td></tr><tr><td style="text-align:left">/ter\b/</td><td style="text-align:left">可匹配chapter，而不能匹配terminal。</td></tr><tr><td style="text-align:left">/\Bapt/</td><td style="text-align:left">可匹配chapter，而不能匹配aptitude。</td></tr><tr><td style="text-align:left">/Windows(?=95</td><td style="text-align:left">98</td><td>NT )/</td><td>可匹配Windows95或Windows98或WindowsNT，当找到一个匹配后，从Windows后面开始进行下一次的检索匹配。</td></tr><tr><td style="text-align:left">/^\s*$/</td><td style="text-align:left">匹配空行。</td></tr><tr><td style="text-align:left">/\d{2}-\d{5}/</td><td style="text-align:left">验证由两位数字、一个连字符再加 5 位数字组成的 ID 号。</td></tr><tr><td style="text-align:left">/&lt;\s<em>(\S+)(\s<sup><a href="#fn_>" id="reffn_>">&gt;</a></sup></em>)?&gt;[\s\S]<em>&lt;\s</em>\/\1\s*&gt;/</td><td style="text-align:left">匹配 HTML 标记。</td></tr></tbody></table></div><h3 id="shell中各种括号的作用-、-、-、-、"><a href="#shell中各种括号的作用-、-、-、-、" class="headerlink" title="shell中各种括号的作用()、(())、[]、[[]]、{}"></a>shell中各种括号的作用()、(())、[]、[[]]、{}</h3><h4 id="单小括号"><a href="#单小括号" class="headerlink" title="单小括号()"></a>单小括号()</h4><ul><li>①命令组。括号中的命令将会新开一个子shell顺序执行，所以括号中的变量不能够被脚本余下的部分使用。括号中多个命令之间用分号隔开，最后一个命令可以没有分号，各命令和括号之间不必有空格。</li><li>②命令替换。等同于<code>cmd</code>，shell扫描一遍命令行，发现了$(cmd)结构，便将$(cmd)中的cmd执行一次，得到其标准输出，再将此输出放到原来命令。有些shell不支持，如tcsh。</li><li>③用于初始化数组。如：array=(a b c d)</li></ul><h4 id="双小括号"><a href="#双小括号" class="headerlink" title="双小括号(())"></a>双小括号(())</h4><ul><li>①整数扩展。这种扩展计算是整数型的计算，不支持浮点型。((exp))结构扩展并计算一个算术表达式的值，如果表达式的结果为0，那么返回的退出状态码为1，或者 是”假”，而一个非零值的表达式所返回的退出状态码将为0，或者是”true”。若是逻辑判断，表达式exp为真则为1,假则为0。</li><li>②只要括号中的运算符、表达式符合C语言运算规则，都可用在$((exp))中，甚至是三目运算符。作不同进位(如二进制、八进制、十六进制)运算时，输出结果全都自动转化成了十进制。如：echo $((16#5f)) 结果为95 (16进位转十进制)</li><li>③单纯用 (( )) 也可重定义变量值，比如 a=5; ((a++)) 可将 $a 重定义为6</li><li>④常用于算术运算比较，双括号中的变量可以不使用$符号前缀。括号内支持多个表达式用逗号分开。 只要括号中的表达式符合C语言运算规则,比如可以直接使用for((i=0;i&lt;5;i++)), 如果不使用双括号, 则为for i in <code>seq 0 4</code>或者for i in {0..4}。再如可以直接使用if (($i&lt;5)), 如果不使用双括号, 则为if [ $i -lt 5 ]。</li></ul><h4 id="单中括号"><a href="#单中括号" class="headerlink" title="单中括号[]"></a>单中括号[]</h4><ul><li>①bash 的内部命令，[和test是等同的。如果我们不用绝对路径指明，通常我们用的都是bash自带的命令。if/test结构中的左中括号是调用test的命令标识，右中括号是关闭条件判断的。这个命令把它的参数作为比较表达式或者作为文件测试，并且根据比较的结果来返回一个退出状态码。if/test结构中并不是必须右中括号，但是新版的Bash中要求必须这样。</li><li>②Test和[]中可用的比较运算符只有==和!=，两者都是用于字符串比较的，不可用于整数比较，整数比较只能使用-eq，-gt这种形式。无论是字符串比较还是整数比较都不支持大于号小于号。如果实在想用，对于字符串比较可以使用转义形式，如果比较”ab”和”bc”：[ ab \&lt; bc ]，结果为真，也就是返回状态为0。[ ]中的逻辑与和逻辑或使用-a 和-o 表示。</li><li>③字符范围。用作正则表达式的一部分，描述一个匹配的字符范围。作为test用途的中括号内不能使用正则。</li><li>④在一个array 结构的上下文中，中括号用来引用数组中每个元素的编号。</li></ul><h4 id="双中括号"><a href="#双中括号" class="headerlink" title="双中括号[[]]"></a>双中括号[[]]</h4><ul><li>①[[是 bash 程序语言的关键字。并不是一个命令，[[ ]] 结构比[ ]结构更加通用。在[[和]]之间所有的字符都不会发生文件名扩展或者单词分割，但是会发生参数扩展和命令替换。</li><li>②支持字符串的模式匹配，使用=~操作符时甚至支持shell的正则表达式。字符串比较时可以把右边的作为一个模式，而不仅仅是一个字符串，比如[[ hello == hell? ]]，结果为真。[[ ]] 中匹配字符串或通配符，不需要引号。</li><li>③使用[[ … ]]条件判断结构，而不是[ … ]，能够防止脚本中的许多逻辑错误。比如，&amp;&amp;、||、&lt;和&gt; 操作符能够正常存在于[[ ]]条件判断结构中，但是如果出现在[ ]结构中的话，会报错。比如可以直接使用if [[ $a != 1 &amp;&amp; $a != 2 ]], 如果不适用双括号, 则为if [ $a -ne 1] &amp;&amp; [ $a != 2 ]或者if [ $a -ne 1 -a $a != 2 ]。</li><li>④bash把双中括号中的表达式看作一个单独的元素，并返回一个退出状态码。</li></ul><h4 id="大括号"><a href="#大括号" class="headerlink" title="大括号{}"></a>大括号{}</h4><ul><li>①大括号拓展。(通配(globbing))将对大括号中的文件名做扩展。在大括号中，不允许有空白，除非这个空白被引用或转义。第一种：对大括号中的以逗号分割的文件列表进行拓展。如 touch {a,b}.txt 结果为a.txt b.txt。第二种：对大括号中以点点（..）分割的顺序文件列表起拓展作用，如：touch {a..d}.sh 结果为a.txt b.txt c.txt d.txt</li><li>②代码块，又被称为内部组，这个结构事实上创建了一个匿名函数 。与小括号中的命令不同，大括号内的命令不会新开一个子shell运行，即脚本余下部分仍可使用括号内变量。括号内的命令间用分号隔开，最后一个也必须有分号。{}的第一个命令和左括号之间必须要有一个空格。</li></ul><h4 id=""><a href="#" class="headerlink" title=" "></a> </h4><ul><li>①${a} 变量a的值, 在不引起歧义的情况下可以省略大括号。</li><li>②$(cmd) 命令替换，和<code>cmd</code>效果相同，结果为shell命令cmd的输，过某些Shell版本不支持$()形式的命令替换, 如tcsh。</li><li>③$((expression)) 和<code>exprexpression</code>效果相同, 计算数学表达式exp的数值, 其中exp只要符合C语言的运算规则即可, 甚至三目运算符和逻辑表达式都可以计算。</li></ul>]]></content>
      
      
      <categories>
          
          <category> Linux,Shell </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux,Shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AndroidSQlite</title>
      <link href="/2021/11/12/AndroidSQlite/"/>
      <url>/2021/11/12/AndroidSQlite/</url>
      
        <content type="html"><![CDATA[<h2 id="安卓通过SQLlite实现登录注册功能"><a href="#安卓通过SQLlite实现登录注册功能" class="headerlink" title="安卓通过SQLlite实现登录注册功能"></a>安卓通过SQLlite实现登录注册功能</h2><h2 id="前面基本操作看图片"><a href="#前面基本操作看图片" class="headerlink" title="前面基本操作看图片"></a>前面基本操作看图片</h2><p><img src="https://img-blog.csdnimg.cn/20201021182507420.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMDAxMTYz,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20201021182609963.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMDAxMTYz,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20201021182616305.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMDAxMTYz,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20201021182627235.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMDAxMTYz,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20201021182649612.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMDAxMTYz,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20201021182703541.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMDAxMTYz,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20201021182710912.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMDAxMTYz,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20201021182800135.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMDAxMTYz,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20201021182942674.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMDAxMTYz,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20201021183025193.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMDAxMTYz,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20201021183034322.png#pic_center" alt="在这里插入图片描述"></p><h2 id="第一个xml文件是：round-bg-xml，后面界面布局要用到"><a href="#第一个xml文件是：round-bg-xml，后面界面布局要用到" class="headerlink" title="第一个xml文件是：round_bg.xml，后面界面布局要用到"></a>第一个xml文件是：round_bg.xml，后面界面布局要用到</h2><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span>?&gt;</span><br><span class="line">&lt;shape xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span><br><span class="line">    &lt;solid android:color=<span class="string">"@color/colorPrimary"</span>/&gt;</span><br><span class="line">    &lt;corners android:radius=<span class="string">"100dp"</span>/&gt;</span><br><span class="line">&lt;/shape&gt;</span><br></pre></td></tr></tbody></table></figure><p><img src="https://img-blog.csdnimg.cn/20201021183400381.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMDAxMTYz,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p><h2 id="第二个xml文件是：round-border-xml"><a href="#第二个xml文件是：round-border-xml" class="headerlink" title="第二个xml文件是：round_border.xml"></a>第二个xml文件是：round_border.xml</h2><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span>?&gt;</span><br><span class="line">&lt;shape xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span><br><span class="line">    &lt;stroke android:color=<span class="string">"@color/colorPrimary"</span></span><br><span class="line">        android:width=<span class="string">"1dp"</span>/&gt;</span><br><span class="line">    &lt;corners android:radius=<span class="string">"100dp"</span>/&gt;</span><br><span class="line">&lt;/shape&gt;</span><br></pre></td></tr></tbody></table></figure><h2 id="修改下系统颜色"><a href="#修改下系统颜色" class="headerlink" title="修改下系统颜色"></a>修改下系统颜色</h2><p><img src="https://img-blog.csdnimg.cn/20201021183555527.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMDAxMTYz,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>改为：</p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span>?&gt;</span><br><span class="line">&lt;resources&gt;</span><br><span class="line">    &lt;color name=<span class="string">"colorPrimary"</span>&gt;<span class="comment">#0099ff&lt;/color&gt;</span></span><br><span class="line">    &lt;color name=<span class="string">"colorPrimaryDark"</span>&gt;<span class="comment">#0099ff&lt;/color&gt;</span></span><br><span class="line">    &lt;color name=<span class="string">"colorAccent"</span>&gt;<span class="comment">#03DAC5&lt;/color&gt;</span></span><br><span class="line">&lt;/resources&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>现在开始添加图标：<br><img src="https://img-blog.csdnimg.cn/20201021183718831.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMDAxMTYz,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20201021183820598.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMDAxMTYz,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20201021183827373.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMDAxMTYz,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20201021183836313.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMDAxMTYz,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20201021183842520.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMDAxMTYz,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p><h2 id="其他的图标如下图，命名方法看个人习惯"><a href="#其他的图标如下图，命名方法看个人习惯" class="headerlink" title="其他的图标如下图，命名方法看个人习惯"></a>其他的图标如下图，命名方法看个人习惯</h2><p><img src="https://img-blog.csdnimg.cn/20201021183923788.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMDAxMTYz,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20201021183928589.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMDAxMTYz,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/20201021183952130.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMDAxMTYz,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20201021183959328.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMDAxMTYz,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>可以参考我的命名方法，不要改太多就行。<br><img src="https://img-blog.csdnimg.cn/20201021184059823.png#pic_center" alt="在这里插入图片描述"></p><h2 id="开始登录界面的布局：打开activity-login-xml"><a href="#开始登录界面的布局：打开activity-login-xml" class="headerlink" title="开始登录界面的布局：打开activity_login.xml"></a>开始登录界面的布局：打开activity_login.xml</h2><p><img src="https://img-blog.csdnimg.cn/20201021184345762.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMDAxMTYz,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span>?&gt;</span><br><span class="line">&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    xmlns:app=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span><br><span class="line">    xmlns:tools=<span class="string">"http://schemas.android.com/tools"</span></span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"match_parent"</span></span><br><span class="line">    tools:context=<span class="string">".LoginActivity"</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;androidx.constraintlayout.widget.Guideline</span><br><span class="line">        android:id=<span class="string">"@+id/guideline"</span></span><br><span class="line">        android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:orientation=<span class="string">"vertical"</span></span><br><span class="line">        app:layout_constraintGuide_percent=<span class="string">"0.5"</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;androidx.constraintlayout.widget.Guideline</span><br><span class="line">        android:id=<span class="string">"@+id/guideline2"</span></span><br><span class="line">        android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:orientation=<span class="string">"horizontal"</span></span><br><span class="line">        app:layout_constraintGuide_percent=<span class="string">"0.35"</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;androidx.constraintlayout.widget.Guideline</span><br><span class="line">        android:id=<span class="string">"@+id/guideline3"</span></span><br><span class="line">        android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:orientation=<span class="string">"horizontal"</span></span><br><span class="line">        app:layout_constraintGuide_percent=<span class="string">"0.45"</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;androidx.constraintlayout.widget.Guideline</span><br><span class="line">        android:id=<span class="string">"@+id/guideline4"</span></span><br><span class="line">        android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:orientation=<span class="string">"horizontal"</span></span><br><span class="line">        app:layout_constraintGuide_percent=<span class="string">"0.55"</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;androidx.constraintlayout.widget.Guideline</span><br><span class="line">        android:id=<span class="string">"@+id/guideline5"</span></span><br><span class="line">        android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:orientation=<span class="string">"horizontal"</span></span><br><span class="line">        app:layout_constraintGuide_percent=<span class="string">"0.65"</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;androidx.constraintlayout.widget.Guideline</span><br><span class="line">        android:id=<span class="string">"@+id/guideline6"</span></span><br><span class="line">        android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:orientation=<span class="string">"horizontal"</span></span><br><span class="line">        app:layout_constraintGuide_percent=<span class="string">"0.75"</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;TextView</span><br><span class="line">        android:id=<span class="string">"@+id/tv_loginview"</span></span><br><span class="line">        android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:text=<span class="string">"@string/logint"</span></span><br><span class="line">        android:textSize=<span class="string">"45sp"</span></span><br><span class="line">        android:textColor=<span class="string">"@color/colorPrimary"</span></span><br><span class="line">        app:layout_constraintBottom_toTopOf=<span class="string">"@+id/guideline2"</span></span><br><span class="line">        app:layout_constraintEnd_toEndOf=<span class="string">"parent"</span></span><br><span class="line">        app:layout_constraintHorizontal_bias=<span class="string">"0.129"</span></span><br><span class="line">        app:layout_constraintStart_toStartOf=<span class="string">"parent"</span></span><br><span class="line">        app:layout_constraintTop_toTopOf=<span class="string">"parent"</span></span><br><span class="line">        app:layout_constraintVertical_bias=<span class="string">"0.494"</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;EditText</span><br><span class="line">        android:id=<span class="string">"@+id/et_User"</span></span><br><span class="line">        android:layout_width=<span class="string">"350dp"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:autofillHints=<span class="string">"user"</span></span><br><span class="line">        android:background=<span class="string">"@drawable/round_border"</span></span><br><span class="line">        android:drawableStart=<span class="string">"@drawable/ic_user"</span></span><br><span class="line">        android:drawablePadding=<span class="string">"16dp"</span></span><br><span class="line">        android:ems=<span class="string">"10"</span></span><br><span class="line">        android:hint=<span class="string">"@string/etUser_hint"</span></span><br><span class="line">        android:inputType=<span class="string">"textEmailAddress"</span></span><br><span class="line">        android:padding=<span class="string">"16dp"</span></span><br><span class="line">        app:layout_constraintBottom_toTopOf=<span class="string">"@+id/guideline3"</span></span><br><span class="line">        app:layout_constraintEnd_toEndOf=<span class="string">"parent"</span></span><br><span class="line">        app:layout_constraintStart_toStartOf=<span class="string">"parent"</span></span><br><span class="line">        tools:ignore=<span class="string">"LabelFor"</span></span><br><span class="line">        app:layout_constraintTop_toTopOf=<span class="string">"@+id/guideline2"</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;EditText</span><br><span class="line">        android:id=<span class="string">"@+id/et_Psw"</span></span><br><span class="line">        android:layout_width=<span class="string">"350dp"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:autofillHints=<span class="string">""</span></span><br><span class="line">        android:background=<span class="string">"@drawable/round_border"</span></span><br><span class="line">        android:drawableStart=<span class="string">"@drawable/ic_lock"</span></span><br><span class="line">        android:drawablePadding=<span class="string">"16dp"</span></span><br><span class="line">        android:ems=<span class="string">"10"</span></span><br><span class="line">        android:hint=<span class="string">"@string/pswHint"</span></span><br><span class="line">        android:inputType=<span class="string">"textPassword"</span></span><br><span class="line">        android:padding=<span class="string">"16dp"</span></span><br><span class="line">        app:layout_constraintBottom_toTopOf=<span class="string">"@+id/guideline4"</span></span><br><span class="line">        app:layout_constraintEnd_toEndOf=<span class="string">"parent"</span></span><br><span class="line">        app:layout_constraintHorizontal_bias=<span class="string">"0.508"</span></span><br><span class="line">        app:layout_constraintStart_toStartOf=<span class="string">"parent"</span></span><br><span class="line">        app:layout_constraintTop_toTopOf=<span class="string">"@+id/guideline3"</span></span><br><span class="line">        app:layout_constraintVertical_bias=<span class="string">"0.47"</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;CheckBox</span><br><span class="line">        android:id=<span class="string">"@+id/cb_rmbPsw"</span></span><br><span class="line">        android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:checked=<span class="string">"true"</span></span><br><span class="line">        android:drawingCacheQuality=<span class="string">"auto"</span></span><br><span class="line">        android:shadowColor=<span class="string">"@color/colorPrimaryDark"</span></span><br><span class="line">        android:text=<span class="string">"@string/rempsw"</span></span><br><span class="line">        android:textColor=<span class="string">"@color/colorPrimary"</span></span><br><span class="line">        android:textColorHighlight=<span class="string">"@color/colorPrimary"</span></span><br><span class="line">        android:textColorLink=<span class="string">"@color/colorPrimary"</span></span><br><span class="line">        android:textSize=<span class="string">"18sp"</span></span><br><span class="line">        app:layout_constraintBottom_toTopOf=<span class="string">"@+id/guideline5"</span></span><br><span class="line">        app:layout_constraintEnd_toStartOf=<span class="string">"@+id/guideline"</span></span><br><span class="line">        app:layout_constraintStart_toStartOf=<span class="string">"parent"</span></span><br><span class="line">        app:layout_constraintTop_toTopOf=<span class="string">"@+id/guideline4"</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id=<span class="string">"@+id/btn_Login"</span></span><br><span class="line">        android:layout_width=<span class="string">"350dp"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:background=<span class="string">"@drawable/round_bg"</span></span><br><span class="line">        android:text=<span class="string">"@string/logintxt"</span></span><br><span class="line">        android:textColor=<span class="string">"#FDFAFA"</span></span><br><span class="line">        android:textSize=<span class="string">"18sp"</span></span><br><span class="line">        app:layout_constraintBottom_toTopOf=<span class="string">"@+id/guideline6"</span></span><br><span class="line">        app:layout_constraintEnd_toEndOf=<span class="string">"parent"</span></span><br><span class="line">        app:layout_constraintHorizontal_bias=<span class="string">"0.498"</span></span><br><span class="line">        app:layout_constraintStart_toStartOf=<span class="string">"parent"</span></span><br><span class="line">        app:layout_constraintTop_toTopOf=<span class="string">"@+id/guideline5"</span></span><br><span class="line">        app:layout_constraintVertical_bias=<span class="string">"0.538"</span>  /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;TextView</span><br><span class="line">        android:id=<span class="string">"@+id/tv_Register"</span></span><br><span class="line">        android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:text=<span class="string">"@string/yhzc"</span></span><br><span class="line">        android:textColor=<span class="string">"@color/colorPrimary"</span></span><br><span class="line">        android:textSize=<span class="string">"18sp"</span></span><br><span class="line">        app:layout_constraintBottom_toTopOf=<span class="string">"@+id/guideline5"</span></span><br><span class="line">        app:layout_constraintEnd_toEndOf=<span class="string">"parent"</span></span><br><span class="line">        app:layout_constraintStart_toStartOf=<span class="string">"@+id/guideline"</span></span><br><span class="line">        app:layout_constraintTop_toTopOf=<span class="string">"@+id/guideline4"</span> /&gt;</span><br><span class="line">&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</span><br></pre></td></tr></tbody></table></figure><h2 id="注册界面的布局：打开activity-registered-xml"><a href="#注册界面的布局：打开activity-registered-xml" class="headerlink" title="注册界面的布局：打开activity_registered.xml"></a>注册界面的布局：打开activity_registered.xml</h2><p><img src="https://img-blog.csdnimg.cn/20201021184532248.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMDAxMTYz,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span>?&gt;</span><br><span class="line">&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    xmlns:app=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span><br><span class="line">    xmlns:tools=<span class="string">"http://schemas.android.com/tools"</span></span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"match_parent"</span></span><br><span class="line">    tools:context=<span class="string">".RegisteredActivity"</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;androidx.constraintlayout.widget.Guideline</span><br><span class="line">        android:id=<span class="string">"@+id/guideline7"</span></span><br><span class="line">        android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:orientation=<span class="string">"vertical"</span></span><br><span class="line">        app:layout_constraintGuide_percent=<span class="string">"0.5"</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;androidx.constraintlayout.widget.Guideline</span><br><span class="line">        android:id=<span class="string">"@+id/guideline8"</span></span><br><span class="line">        android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:orientation=<span class="string">"horizontal"</span></span><br><span class="line">        app:layout_constraintGuide_percent=<span class="string">"0.15"</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;androidx.constraintlayout.widget.Guideline</span><br><span class="line">        android:id=<span class="string">"@+id/guideline9"</span></span><br><span class="line">        android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:orientation=<span class="string">"horizontal"</span></span><br><span class="line">        app:layout_constraintGuide_percent=<span class="string">"0.25"</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;androidx.constraintlayout.widget.Guideline</span><br><span class="line">        android:id=<span class="string">"@+id/guideline10"</span></span><br><span class="line">        android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:orientation=<span class="string">"horizontal"</span></span><br><span class="line">        app:layout_constraintGuide_percent=<span class="string">"0.35"</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;androidx.constraintlayout.widget.Guideline</span><br><span class="line">        android:id=<span class="string">"@+id/guideline11"</span></span><br><span class="line">        android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:orientation=<span class="string">"horizontal"</span></span><br><span class="line">        app:layout_constraintGuide_percent=<span class="string">"0.45"</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;androidx.constraintlayout.widget.Guideline</span><br><span class="line">        android:id=<span class="string">"@+id/guideline12"</span></span><br><span class="line">        android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:orientation=<span class="string">"horizontal"</span></span><br><span class="line">        app:layout_constraintGuide_percent=<span class="string">"0.55"</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;androidx.constraintlayout.widget.Guideline</span><br><span class="line">        android:id=<span class="string">"@+id/guideline13"</span></span><br><span class="line">        android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:orientation=<span class="string">"horizontal"</span></span><br><span class="line">        app:layout_constraintGuide_percent=<span class="string">"0.65"</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;androidx.constraintlayout.widget.Guideline</span><br><span class="line">        android:id=<span class="string">"@+id/guideline14"</span></span><br><span class="line">        android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:orientation=<span class="string">"horizontal"</span></span><br><span class="line">        app:layout_constraintGuide_percent=<span class="string">"0.75"</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;ImageView</span><br><span class="line">        android:id=<span class="string">"@+id/iv_back"</span></span><br><span class="line">        android:layout_width=<span class="string">"50dp"</span></span><br><span class="line">        android:layout_height=<span class="string">"50dp"</span></span><br><span class="line">        android:layout_marginTop=<span class="string">"16dp"</span></span><br><span class="line">        app:layout_constraintBottom_toTopOf=<span class="string">"@+id/guideline8"</span></span><br><span class="line">        app:layout_constraintEnd_toStartOf=<span class="string">"@+id/guideline7"</span></span><br><span class="line">        app:layout_constraintHorizontal_bias=<span class="string">"0.262"</span></span><br><span class="line">        app:layout_constraintStart_toStartOf=<span class="string">"parent"</span></span><br><span class="line">        app:layout_constraintTop_toTopOf=<span class="string">"parent"</span></span><br><span class="line">        app:layout_constraintVertical_bias=<span class="string">"0.477"</span></span><br><span class="line">        app:srcCompat=<span class="string">"@drawable/ic_back"</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;EditText</span><br><span class="line">        android:id=<span class="string">"@+id/et_rgsName"</span></span><br><span class="line">        android:layout_width=<span class="string">"350dp"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:autofillHints=<span class="string">""</span></span><br><span class="line">        android:background=<span class="string">"@drawable/round_border"</span></span><br><span class="line">        android:drawableStart=<span class="string">"@drawable/ic_user"</span></span><br><span class="line">        android:drawableEnd=<span class="string">"@drawable/ic_start"</span></span><br><span class="line">        android:drawablePadding=<span class="string">"16dp"</span></span><br><span class="line">        android:ems=<span class="string">"10"</span></span><br><span class="line">        android:hint=<span class="string">"@string/plsu"</span></span><br><span class="line">        android:inputType=<span class="string">"textPersonName"</span></span><br><span class="line">        android:padding=<span class="string">"16dp"</span></span><br><span class="line">        app:layout_constraintBottom_toTopOf=<span class="string">"@+id/guideline9"</span></span><br><span class="line">        app:layout_constraintEnd_toEndOf=<span class="string">"parent"</span></span><br><span class="line">        app:layout_constraintStart_toStartOf=<span class="string">"parent"</span></span><br><span class="line">        app:layout_constraintTop_toTopOf=<span class="string">"@+id/guideline8"</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;EditText</span><br><span class="line">        android:id=<span class="string">"@+id/et_rgsEmail"</span></span><br><span class="line">        android:layout_width=<span class="string">"350dp"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:autofillHints=<span class="string">""</span></span><br><span class="line">        android:background=<span class="string">"@drawable/round_border"</span></span><br><span class="line">        android:drawableStart=<span class="string">"@drawable/ic_email"</span></span><br><span class="line">        android:drawablePadding=<span class="string">"16dp"</span></span><br><span class="line">        android:ems=<span class="string">"10"</span></span><br><span class="line">        android:hint=<span class="string">"@string/plsemail"</span></span><br><span class="line">        android:inputType=<span class="string">"textPersonName"</span></span><br><span class="line">        android:padding=<span class="string">"16dp"</span></span><br><span class="line">        app:layout_constraintBottom_toTopOf=<span class="string">"@+id/guideline10"</span></span><br><span class="line">        app:layout_constraintEnd_toEndOf=<span class="string">"parent"</span></span><br><span class="line">        app:layout_constraintStart_toStartOf=<span class="string">"parent"</span></span><br><span class="line">        app:layout_constraintTop_toTopOf=<span class="string">"@+id/guideline9"</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;EditText</span><br><span class="line">        android:id=<span class="string">"@+id/et_rgsPhoneNum"</span></span><br><span class="line">        android:layout_width=<span class="string">"350dp"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:autofillHints=<span class="string">""</span></span><br><span class="line">        android:background=<span class="string">"@drawable/round_border"</span></span><br><span class="line">        android:drawableStart=<span class="string">"@drawable/ic_phone"</span></span><br><span class="line">        android:drawableEnd=<span class="string">"@drawable/ic_start"</span></span><br><span class="line">        android:drawablePadding=<span class="string">"16dp"</span></span><br><span class="line">        android:ems=<span class="string">"10"</span></span><br><span class="line">        android:hint=<span class="string">"@string/plsohone"</span></span><br><span class="line">        android:inputType=<span class="string">"textPersonName"</span></span><br><span class="line">        android:padding=<span class="string">"16dp"</span></span><br><span class="line">        app:layout_constraintBottom_toTopOf=<span class="string">"@+id/guideline11"</span></span><br><span class="line">        app:layout_constraintEnd_toEndOf=<span class="string">"parent"</span></span><br><span class="line">        app:layout_constraintStart_toStartOf=<span class="string">"parent"</span></span><br><span class="line">        app:layout_constraintTop_toTopOf=<span class="string">"@+id/guideline10"</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;EditText</span><br><span class="line">        android:id=<span class="string">"@+id/et_rgsPsw1"</span></span><br><span class="line">        android:layout_width=<span class="string">"350dp"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:autofillHints=<span class="string">""</span></span><br><span class="line">        android:background=<span class="string">"@drawable/round_border"</span></span><br><span class="line">        android:drawableStart=<span class="string">"@drawable/ic_lock"</span></span><br><span class="line">        android:drawableEnd=<span class="string">"@drawable/ic_start"</span></span><br><span class="line">        android:drawablePadding=<span class="string">"16dp"</span></span><br><span class="line">        android:ems=<span class="string">"10"</span></span><br><span class="line">        android:hint=<span class="string">"@string/plspsw"</span></span><br><span class="line">        android:inputType=<span class="string">"textPersonName"</span></span><br><span class="line">        android:padding=<span class="string">"16dp"</span></span><br><span class="line">        app:layout_constraintBottom_toTopOf=<span class="string">"@+id/guideline12"</span></span><br><span class="line">        app:layout_constraintEnd_toEndOf=<span class="string">"parent"</span></span><br><span class="line">        app:layout_constraintStart_toStartOf=<span class="string">"parent"</span></span><br><span class="line">        app:layout_constraintTop_toTopOf=<span class="string">"@+id/guideline11"</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;EditText</span><br><span class="line">        android:id=<span class="string">"@+id/et_rgsPsw2"</span></span><br><span class="line">        android:layout_width=<span class="string">"350dp"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:autofillHints=<span class="string">""</span></span><br><span class="line">        android:background=<span class="string">"@drawable/round_border"</span></span><br><span class="line">        android:drawableStart=<span class="string">"@drawable/ic_lock"</span></span><br><span class="line">        android:drawableEnd=<span class="string">"@drawable/ic_start"</span></span><br><span class="line">        android:drawablePadding=<span class="string">"16dp"</span></span><br><span class="line">        android:ems=<span class="string">"10"</span></span><br><span class="line">        android:hint=<span class="string">"@string/plspsw"</span></span><br><span class="line">        android:inputType=<span class="string">"textPersonName"</span></span><br><span class="line">        android:padding=<span class="string">"16dp"</span></span><br><span class="line">        app:layout_constraintBottom_toTopOf=<span class="string">"@+id/guideline13"</span></span><br><span class="line">        app:layout_constraintEnd_toEndOf=<span class="string">"parent"</span></span><br><span class="line">        app:layout_constraintStart_toStartOf=<span class="string">"parent"</span></span><br><span class="line">        app:layout_constraintTop_toTopOf=<span class="string">"@+id/guideline12"</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id=<span class="string">"@+id/btn_rgs"</span></span><br><span class="line">        android:layout_width=<span class="string">"350dp"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:background=<span class="string">"@drawable/round_bg"</span></span><br><span class="line">        android:text=<span class="string">"@string/reg"</span></span><br><span class="line">        android:textColor=<span class="string">"#FFFFFF"</span></span><br><span class="line">        android:textSize=<span class="string">"18sp"</span></span><br><span class="line">        app:layout_constraintBottom_toTopOf=<span class="string">"@+id/guideline14"</span></span><br><span class="line">        app:layout_constraintEnd_toEndOf=<span class="string">"parent"</span></span><br><span class="line">        app:layout_constraintHorizontal_bias=<span class="string">"0.491"</span></span><br><span class="line">        app:layout_constraintStart_toStartOf=<span class="string">"parent"</span></span><br><span class="line">        app:layout_constraintTop_toTopOf=<span class="string">"@+id/guideline13"</span></span><br><span class="line">        app:layout_constraintVertical_bias=<span class="string">"0.692"</span> /&gt;</span><br><span class="line"></span><br><span class="line">&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</span><br></pre></td></tr></tbody></table></figure><h2 id="界面布局完成，开始来正事。"><a href="#界面布局完成，开始来正事。" class="headerlink" title="界面布局完成，开始来正事。"></a>界面布局完成，开始来正事。</h2><h4 id="新建两个工具类"><a href="#新建两个工具类" class="headerlink" title="新建两个工具类"></a>新建两个工具类</h4><p><img src="https://img-blog.csdnimg.cn/20201021184903507.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMDAxMTYz,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20201021185039368.png#pic_center" alt="在这里插入图片描述"></p><h4 id="按确定就能添加：打开DBOpenHelper-class-不懂看注释！"><a href="#按确定就能添加：打开DBOpenHelper-class-不懂看注释！" class="headerlink" title="按确定就能添加：打开DBOpenHelper.class,不懂看注释！"></a>按确定就能添加：打开DBOpenHelper.class,不懂看注释！</h4><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">package com.kizai.com.login;</span><br><span class="line"></span><br><span class="line">import android.annotation.SuppressLint;</span><br><span class="line">import android.content.Context;</span><br><span class="line">import android.database.Cursor;</span><br><span class="line">import android.database.sqlite.SQLiteDatabase;</span><br><span class="line">import android.database.sqlite.SQLiteOpenHelper;</span><br><span class="line"></span><br><span class="line">import java.util.ArrayList;</span><br><span class="line"></span><br><span class="line">public class DBOpenHelper extends SQLiteOpenHelper {</span><br><span class="line">    /**</span><br><span class="line">     * 声明一个AndroidSDK自带的数据库变量db</span><br><span class="line">     */</span><br><span class="line">    private SQLiteDatabase db;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 写一个这个类的构造函数，参数为上下文context，所谓上下文就是这个类所在包的路径</span><br><span class="line">     * 指明上下文，数据库名，工厂默认空值，版本号默认从1开始</span><br><span class="line">     * super(context,<span class="string">"db_test"</span>,null,1);</span><br><span class="line">     * 把数据库设置成可写入状态，除非内存已满，那时候会自动设置为只读模式</span><br><span class="line">     * 不过，以现如今的内存容量，估计一辈子也见不到几次内存占满的状态</span><br><span class="line">     * db = getReadableDatabase();</span><br><span class="line">     */</span><br><span class="line">    DBOpenHelper(Context context){</span><br><span class="line">        super(context,<span class="string">"db_test"</span>,null,1);</span><br><span class="line">        db = getReadableDatabase();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 重写两个必须要重写的方法，因为class DBOpenHelper extends SQLiteOpenHelper</span><br><span class="line">     * 而这两个方法是 abstract 类 SQLiteOpenHelper 中声明的 abstract 方法</span><br><span class="line">     * 所以必须在子类 DBOpenHelper 中重写 abstract 方法</span><br><span class="line">     * 想想也是，为啥规定这么死必须重写？</span><br><span class="line">     * 因为，一个数据库表，首先是要被创建的，然后免不了是要进行增删改操作的</span><br><span class="line">     * 所以就有onCreate()、onUpgrade()两个方法</span><br><span class="line">     *</span><br><span class="line">     */</span><br><span class="line">    @Override</span><br><span class="line">    public void onCreate(SQLiteDatabase db){</span><br><span class="line">        db.execSQL(<span class="string">"CREATE TABLE IF NOT EXISTS user("</span> +</span><br><span class="line">                <span class="string">"_id INTEGER PRIMARY KEY AUTOINCREMENT,"</span> +</span><br><span class="line">                <span class="string">"name TEXT,"</span> +</span><br><span class="line">                <span class="string">"password TEXT,"</span> +</span><br><span class="line">                <span class="string">"email TEXT,"</span> +</span><br><span class="line">                <span class="string">"phonenum TEXT)"</span></span><br><span class="line">        );</span><br><span class="line">    }</span><br><span class="line">    //版本适应</span><br><span class="line">    @Override</span><br><span class="line">    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion){</span><br><span class="line">        db.execSQL(<span class="string">"DROP TABLE IF EXISTS user"</span>);</span><br><span class="line">        onCreate(db);</span><br><span class="line">    }</span><br><span class="line">    /**</span><br><span class="line">     * 接下来写自定义的增删改查方法</span><br><span class="line">     * 这些方法，写在这里归写在这里，以后不一定都用</span><br><span class="line">     * add()</span><br><span class="line">     * delete()</span><br><span class="line">     * update()</span><br><span class="line">     * getAllData()</span><br><span class="line">     */</span><br><span class="line">    void add(String name, String password,String email,String phonenum){</span><br><span class="line">        db.execSQL(<span class="string">"INSERT INTO user (name,password,email,phonenum) VALUES(?,?,?,?)"</span>,new Object[]{name,password,email,phonenum});</span><br><span class="line">    }</span><br><span class="line">    public void delete(String name,String password){</span><br><span class="line">        db.execSQL(<span class="string">"DELETE FROM user WHERE name = AND password ="</span>+name+password);</span><br><span class="line">    }</span><br><span class="line">    public void updata(String password){</span><br><span class="line">        db.execSQL(<span class="string">"UPDATE user SET password = ?"</span>,new Object[]{password});</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 前三个没啥说的，都是一套的看懂一个其他的都能懂了</span><br><span class="line">     * 下面重点说一下查询表user全部内容的方法</span><br><span class="line">     * 我们查询出来的内容，需要有个容器存放，以供使用，</span><br><span class="line">     * 所以定义了一个ArrayList类的list</span><br><span class="line">     * 有了容器，接下来就该从表中查询数据了，</span><br><span class="line">     * 这里使用游标Cursor，这就是数据库的功底了，</span><br><span class="line">     * 在Android中我就不细说了，因为我数据库功底也不是很厚，</span><br><span class="line">     * 但我知道，如果需要用Cursor的话，第一个参数：<span class="string">"表名"</span>，中间5个：null，</span><br><span class="line">     *                                                     最后是查询出来内容的排序方式：<span class="string">"name DESC"</span></span><br><span class="line">     * 游标定义好了，接下来写一个<span class="keyword">while</span>循环，让游标从表头游到表尾</span><br><span class="line">     * 在游的过程中把游出来的数据存放到list容器中</span><br><span class="line">     *</span><br><span class="line">     */</span><br><span class="line">    ArrayList&lt;User&gt; <span class="function"><span class="title">getAllData</span></span>(){</span><br><span class="line">        ArrayList&lt;User&gt; list = new ArrayList&lt;User&gt;();</span><br><span class="line">        @SuppressLint(<span class="string">"Recycle"</span>) Cursor cursor = db.query(<span class="string">"user"</span>,null,null,null,null,null,<span class="string">"name DESC"</span>);</span><br><span class="line">        <span class="keyword">while</span>(cursor.moveToNext()){</span><br><span class="line">            String name = cursor.getString(cursor.getColumnIndex(<span class="string">"name"</span>));</span><br><span class="line">            String email = cursor.getString(cursor.getColumnIndex(<span class="string">"email"</span>));</span><br><span class="line">            String phonenum = cursor.getString(cursor.getColumnIndex(<span class="string">"phonenum"</span>));</span><br><span class="line">            String password = cursor.getString(cursor.getColumnIndex(<span class="string">"password"</span>));</span><br><span class="line"></span><br><span class="line">            list.add(new User(name,password,email,phonenum));</span><br><span class="line">        }</span><br><span class="line">        <span class="built_in">return</span> list;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h4 id="再添加一个用户类：User-class"><a href="#再添加一个用户类：User-class" class="headerlink" title="再添加一个用户类：User.class"></a>再添加一个用户类：User.class</h4><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">package com.kizai.com.login;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Created by kizai 2020/05/19</span><br><span class="line"> */</span><br><span class="line">public class User {</span><br><span class="line">    private String name;            //用户名</span><br><span class="line">    private String password;        //密码</span><br><span class="line">    private String email;        //邮箱</span><br><span class="line">    private String phonenum;        //手机号码</span><br><span class="line"></span><br><span class="line">    User(String name, String password, String email, String phonenum) {</span><br><span class="line">        this.name = name;</span><br><span class="line">        this.password = password;</span><br><span class="line">        this.email = email;</span><br><span class="line">        this.phonenum = phonenum;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public String <span class="function"><span class="title">getEmail</span></span>() {</span><br><span class="line">        <span class="built_in">return</span> email;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public void setEmail(String email) {</span><br><span class="line">        this.email = email;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public String <span class="function"><span class="title">getPhonenum</span></span>() {</span><br><span class="line">        <span class="built_in">return</span> phonenum;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public void setPhonenum(String phonenum) {</span><br><span class="line">        this.phonenum = phonenum;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public String <span class="function"><span class="title">getName</span></span>() {</span><br><span class="line">        <span class="built_in">return</span> name;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public void setName(String name) {</span><br><span class="line">        this.name = name;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public String <span class="function"><span class="title">getPassword</span></span>() {</span><br><span class="line">        <span class="built_in">return</span> password;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public void setPassword(String password) {</span><br><span class="line">        this.password = password;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String <span class="function"><span class="title">toString</span></span>() {</span><br><span class="line">        <span class="built_in">return</span> <span class="string">"User{"</span> +</span><br><span class="line">                <span class="string">"name='"</span> + name + <span class="string">'\'</span><span class="string">' +</span></span><br><span class="line"><span class="string">                ", password='</span><span class="string">" + password + '\'' +</span></span><br><span class="line"><span class="string">                "</span>, email=<span class="string">'" + email + '</span>\<span class="string">''</span> +</span><br><span class="line">                <span class="string">", phonenum='"</span> + phonenum + <span class="string">'\'</span><span class="string">' +</span></span><br><span class="line"><span class="string">                '</span>}<span class="string">';</span></span><br><span class="line"><span class="string">    }</span></span><br><span class="line"><span class="string">}</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></tbody></table></figure><h4 id="打开LoginActivity，里面有注释，希望能看懂"><a href="#打开LoginActivity，里面有注释，希望能看懂" class="headerlink" title="打开LoginActivity，里面有注释，希望能看懂"></a>打开LoginActivity，里面有注释，希望能看懂</h4><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">package com.kizai.com.login;</span><br><span class="line"></span><br><span class="line">import androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line">import android.annotation.SuppressLint;</span><br><span class="line">import android.content.Intent;</span><br><span class="line">import android.content.SharedPreferences;</span><br><span class="line">import android.content.pm.ActivityInfo;</span><br><span class="line">import android.os.Bundle;</span><br><span class="line">import android.text.TextUtils;</span><br><span class="line">import android.text.method.HideReturnsTransformationMethod;</span><br><span class="line">import android.text.method.PasswordTransformationMethod;</span><br><span class="line">import android.view.View;</span><br><span class="line">import android.view.WindowManager;</span><br><span class="line">import android.widget.Button;</span><br><span class="line">import android.widget.CheckBox;</span><br><span class="line">import android.widget.EditText;</span><br><span class="line">import android.widget.ImageView;</span><br><span class="line">import android.widget.TextView;</span><br><span class="line">import android.widget.Toast;</span><br><span class="line"></span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.Objects;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 此类 implements View.OnClickListener 之后，</span><br><span class="line"> * 就可以把onClick事件写到onCreate()方法之外</span><br><span class="line"> * 这样，onCreate()方法中的代码就不会显得很冗余</span><br><span class="line"> */</span><br><span class="line">public class LoginActivity extends AppCompatActivity implements View.OnClickListener {</span><br><span class="line">    private DBOpenHelper mDBOpenHelper;</span><br><span class="line">    private EditText et_User, et_Psw;</span><br><span class="line">    private CheckBox cb_rmbPsw;</span><br><span class="line">    private String userName;</span><br><span class="line">    private SharedPreferences.Editor editor;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 创建 Activity 时先来重写 onCreate() 方法</span><br><span class="line">     * 保存实例状态</span><br><span class="line">     * super.onCreate(savedInstanceState);</span><br><span class="line">     * 设置视图内容的配置文件</span><br><span class="line">     * setContentView(R.layout.activity_login);</span><br><span class="line">     * 上面这行代码真正实现了把视图层 View 也就是 layout 的内容放到 Activity 中进行显示</span><br><span class="line">     * 初始化视图中的控件对象 initView()</span><br><span class="line">     * 实例化 DBOpenHelper，待会进行登录验证的时候要用来进行数据查询</span><br><span class="line">     * mDBOpenHelper = new DBOpenHelper(this);</span><br><span class="line">     */</span><br><span class="line"></span><br><span class="line">    @SuppressLint(<span class="string">"CommitPrefEdits"</span>)</span><br><span class="line">    @Override</span><br><span class="line">    protected void onCreate(Bundle savedInstanceState) {</span><br><span class="line">        super.onCreate(savedInstanceState);</span><br><span class="line">        getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);//隐藏状态栏</span><br><span class="line">        Objects.requireNonNull(getSupportActionBar()).hide();//隐藏标题栏</span><br><span class="line">        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_NOSENSOR);//禁止横屏</span><br><span class="line">        setContentView(R.layout.activity_login);</span><br><span class="line"></span><br><span class="line">        initView();//初始化界面</span><br><span class="line">        mDBOpenHelper = new DBOpenHelper(this);</span><br><span class="line"></span><br><span class="line">        SharedPreferences sp = getSharedPreferences(<span class="string">"user_mes"</span>, MODE_PRIVATE);</span><br><span class="line">        editor = sp.edit();</span><br><span class="line">        <span class="keyword">if</span>(sp.getBoolean(<span class="string">"flag"</span>,<span class="literal">false</span>)){</span><br><span class="line">            String user_read = sp.getString(<span class="string">"user"</span>,<span class="string">""</span>);</span><br><span class="line">            String psw_read = sp.getString(<span class="string">"psw"</span>,<span class="string">""</span>);</span><br><span class="line">            et_User.setText(user_read);</span><br><span class="line">            et_Psw.setText(psw_read);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    private void <span class="function"><span class="title">initView</span></span>() {</span><br><span class="line">        //初始化控件</span><br><span class="line">        et_User = findViewById(R.id.et_User);</span><br><span class="line">        et_Psw = findViewById(R.id.et_Psw);</span><br><span class="line">        cb_rmbPsw = findViewById(R.id.cb_rmbPsw);</span><br><span class="line">        Button btn_Login = findViewById(R.id.btn_Login);</span><br><span class="line">        TextView tv_register = findViewById(R.id.tv_Register);</span><br><span class="line">        //设置点击事件监听器</span><br><span class="line">        btn_Login.setOnClickListener(this);</span><br><span class="line">        tv_register.setOnClickListener(this);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onClick(View v) {</span><br><span class="line">        switch (v.getId()){</span><br><span class="line">            <span class="keyword">case</span> R.id.tv_Register: //注册</span><br><span class="line">                Intent intent = new Intent(LoginActivity.this, RegisteredActivity.class);//跳转到注册界面</span><br><span class="line">                startActivity(intent);</span><br><span class="line">                finish();</span><br><span class="line">                <span class="built_in">break</span>;</span><br><span class="line">            /**</span><br><span class="line">             * 登录验证：</span><br><span class="line">             *</span><br><span class="line">             * 从EditText的对象上获取文本编辑框输入的数据，并把左右两边的空格去掉</span><br><span class="line">             *  String name = mEtLoginactivityUsername.getText().toString().trim();</span><br><span class="line">             *  String password = mEtLoginactivityPassword.getText().toString().trim();</span><br><span class="line">             *  进行匹配验证,先判断一下用户名密码是否为空，</span><br><span class="line">             *  <span class="keyword">if</span> (!TextUtils.isEmpty(name) &amp;&amp; !TextUtils.isEmpty(password))</span><br><span class="line">             *  再进而<span class="keyword">for</span>循环判断是否与数据库中的数据相匹配</span><br><span class="line">             *  <span class="keyword">if</span> (name.equals(user.getName()) &amp;&amp; password.equals(user.getPassword()))</span><br><span class="line">             *  一旦匹配，立即将match = <span class="literal">true</span>；<span class="built_in">break</span>；</span><br><span class="line">             *  否则 一直匹配到结束 match = <span class="literal">false</span>；</span><br><span class="line">             *</span><br><span class="line">             *  登录成功之后，进行页面跳转：</span><br><span class="line">             *</span><br><span class="line">             *  Intent intent = new Intent(this, MainActivity.class);</span><br><span class="line">             *  startActivity(intent);</span><br><span class="line">             *  finish();//销毁此Activity</span><br><span class="line">             */</span><br><span class="line">            <span class="keyword">case</span> R.id.btn_Login:</span><br><span class="line">                String name = et_User.getText().toString().trim();</span><br><span class="line">                String password = et_Psw.getText().toString().trim();</span><br><span class="line">                <span class="keyword">if</span> (!TextUtils.isEmpty(name) &amp;&amp; !TextUtils.isEmpty(password)) {</span><br><span class="line">                    ArrayList&lt;User&gt; data = mDBOpenHelper.getAllData();</span><br><span class="line">                    boolean match = <span class="literal">false</span>;</span><br><span class="line">                    boolean match2 = <span class="literal">false</span>;</span><br><span class="line">                    <span class="keyword">for</span> (int i = 0; i &lt; data.size(); i++) {</span><br><span class="line">                        User user = data.get(i);</span><br><span class="line">                        <span class="keyword">if</span> ((name.equals(user.getName()) &amp;&amp; password.equals(user.getPassword()))||</span><br><span class="line">                                (name.equals(user.getEmail())&amp;&amp;password.equals(user.getPassword()))||</span><br><span class="line">                                (name.equals(user.getPhonenum())&amp;&amp;password.equals(user.getPassword()))) {</span><br><span class="line">                            userName = user.getName();</span><br><span class="line">                            match = <span class="literal">true</span>;</span><br><span class="line">                            <span class="keyword">if</span>(cb_rmbPsw.isChecked()){</span><br><span class="line">                                editor.putBoolean(<span class="string">"flag"</span>,<span class="literal">true</span>);</span><br><span class="line">                                editor.putString(<span class="string">"user"</span>,user.getName());</span><br><span class="line">                                editor.putString(<span class="string">"psw"</span>,user.getPassword());</span><br><span class="line">                                editor.apply();</span><br><span class="line">                                match2 = <span class="literal">true</span>;</span><br><span class="line">                            }<span class="keyword">else</span> {</span><br><span class="line">                                editor.putString(<span class="string">"user"</span>,user.getName());</span><br><span class="line">                                editor.putString(<span class="string">"psw"</span>,<span class="string">""</span>);</span><br><span class="line">//                                editor.clear();</span><br><span class="line">                                editor.apply();</span><br><span class="line">                                match2 = <span class="literal">false</span>;</span><br><span class="line">                            }</span><br><span class="line">                            <span class="built_in">break</span>;</span><br><span class="line">                        } <span class="keyword">else</span> {</span><br><span class="line">                            match = <span class="literal">false</span>;</span><br><span class="line">                        }</span><br><span class="line">                    }</span><br><span class="line">                    <span class="keyword">if</span> (match) {</span><br><span class="line">                        <span class="keyword">if</span>(match2){</span><br><span class="line">                            Toast.makeText(this, <span class="string">"成功记住密码"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                            cb_rmbPsw.setChecked(<span class="literal">true</span>);</span><br><span class="line">                        }</span><br><span class="line">                        Toast.makeText(this, <span class="string">"登录成功"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                        Runnable target;</span><br><span class="line">                        //用线程启动</span><br><span class="line">                        Thread thread = new <span class="function"><span class="title">Thread</span></span>(){</span><br><span class="line">                            @Override</span><br><span class="line">                            public void <span class="function"><span class="title">run</span></span>(){</span><br><span class="line">                                try {</span><br><span class="line">                                    sleep(2000);//2秒 模拟登录时间</span><br><span class="line">                                    String user_name = userName;</span><br><span class="line">                                    Intent intent1 = new Intent(LoginActivity.this, MainActivity.class);//设置自己跳转到成功的界面</span><br><span class="line">                                    </span><br><span class="line">                                    //intent1.putExtra(<span class="string">"user_name"</span>,user_name);</span><br><span class="line">                                    startActivity(intent1);</span><br><span class="line">                                    finish();</span><br><span class="line">                                }catch (Exception e){</span><br><span class="line">                                    e.printStackTrace();</span><br><span class="line">                                }</span><br><span class="line">                            }</span><br><span class="line">                        };</span><br><span class="line">                        thread.start();//打开线程</span><br><span class="line">                    } <span class="keyword">else</span> {</span><br><span class="line">                        Toast.makeText(this, <span class="string">"用户名或密码不正确，请重新输入"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                    }</span><br><span class="line">                } <span class="keyword">else</span> {</span><br><span class="line">                    Toast.makeText(this, <span class="string">"请输入你的用户名或密码"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                }</span><br><span class="line">                <span class="built_in">break</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="打开RegisteredActivity，里面一样有注释"><a href="#打开RegisteredActivity，里面一样有注释" class="headerlink" title="打开RegisteredActivity，里面一样有注释"></a>打开RegisteredActivity，里面一样有注释</h4><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">package com.kizai.com.login;</span><br><span class="line"></span><br><span class="line">import androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line">import android.content.Intent;</span><br><span class="line">import android.content.pm.ActivityInfo;</span><br><span class="line">import android.os.Bundle;</span><br><span class="line">import android.text.TextUtils;</span><br><span class="line">import android.view.View;</span><br><span class="line">import android.widget.Button;</span><br><span class="line">import android.widget.EditText;</span><br><span class="line">import android.widget.ImageView;</span><br><span class="line">import android.widget.Toast;</span><br><span class="line"></span><br><span class="line">public class RegisteredActivity extends AppCompatActivity implements View.OnClickListener {</span><br><span class="line">    private EditText et_rgsName, et_rgsEmail, et_rgsPhoneNum, et_rgsPsw1, et_rgsPsw2;</span><br><span class="line">    private DBOpenHelper mDBOpenHelper;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onCreate(Bundle savedInstanceState) {</span><br><span class="line">        super.onCreate(savedInstanceState);</span><br><span class="line">        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_NOSENSOR);//禁止横屏</span><br><span class="line">        setContentView(R.layout.activity_registered);</span><br><span class="line">        setTitle(<span class="string">"用户注册"</span>);//顶部标题改成用户注册</span><br><span class="line"></span><br><span class="line">        initView();//初始化界面</span><br><span class="line">        mDBOpenHelper = new DBOpenHelper(this);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    private void <span class="function"><span class="title">initView</span></span>() {</span><br><span class="line">        et_rgsName = findViewById(R.id.et_rgsName);</span><br><span class="line">        et_rgsEmail = findViewById(R.id.et_rgsEmail);</span><br><span class="line">        et_rgsPhoneNum = findViewById(R.id.et_rgsPhoneNum);</span><br><span class="line">        et_rgsPsw1 = findViewById(R.id.et_rgsPsw1);</span><br><span class="line">        et_rgsPsw2 = findViewById(R.id.et_rgsPsw2);</span><br><span class="line"></span><br><span class="line">        Button btn_register = findViewById(R.id.btn_rgs);</span><br><span class="line">        ImageView iv_back = findViewById(R.id.iv_back);</span><br><span class="line">        /**</span><br><span class="line">         * 注册页面能点击的就三个地方</span><br><span class="line">         * top处返回箭头、刷新验证码图片、注册按钮</span><br><span class="line">         */</span><br><span class="line">        iv_back.setOnClickListener(this);</span><br><span class="line">        btn_register.setOnClickListener(this);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onClick(View v) {</span><br><span class="line">        switch (v.getId()) {</span><br><span class="line">            <span class="keyword">case</span> R.id.iv_back://返回登录界面</span><br><span class="line">                Intent intent = new Intent(RegisteredActivity.this, LoginActivity.class);</span><br><span class="line">                startActivity(intent);</span><br><span class="line">                finish();</span><br><span class="line">                <span class="built_in">break</span>;</span><br><span class="line">            <span class="keyword">case</span> R.id.btn_rgs://注册按钮</span><br><span class="line">                //获取用户输入的用户名、密码、验证码</span><br><span class="line">                String username = et_rgsName.getText().toString().trim();</span><br><span class="line">                String password1 = et_rgsPsw1.getText().toString().trim();</span><br><span class="line">                String password2 = et_rgsPsw2.getText().toString().trim();</span><br><span class="line">                String email = et_rgsEmail.getText().toString().trim();</span><br><span class="line">                String phonenum = et_rgsPhoneNum.getText().toString().trim();</span><br><span class="line">                //注册验证</span><br><span class="line">                <span class="keyword">if</span> (!TextUtils.isEmpty(username) &amp;&amp; !TextUtils.isEmpty(password1) &amp;&amp; !TextUtils.isEmpty(password2)) {</span><br><span class="line">                    //判断两次密码是否一致</span><br><span class="line">                    <span class="keyword">if</span> (password1.equals(password2)) {</span><br><span class="line">                        //将用户名和密码加入到数据库中</span><br><span class="line">                        mDBOpenHelper.add(username, password2, email, phonenum);</span><br><span class="line">                        Intent intent1 = new Intent(RegisteredActivity.this, LoginActivity.class);</span><br><span class="line">                        startActivity(intent1);</span><br><span class="line">                        finish();</span><br><span class="line">                        Toast.makeText(this, <span class="string">"验证通过，注册成功"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                    } <span class="keyword">else</span> {</span><br><span class="line">                        Toast.makeText(this, <span class="string">"两次密码不一致,注册失败"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                    }</span><br><span class="line">                } <span class="keyword">else</span> {</span><br><span class="line">                    Toast.makeText(this, <span class="string">"注册信息不完善,注册失败"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                }</span><br><span class="line">                <span class="built_in">break</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="做到这里别以为完事了，还要设置打开应用第一个显示的界面"><a href="#做到这里别以为完事了，还要设置打开应用第一个显示的界面" class="headerlink" title="做到这里别以为完事了，还要设置打开应用第一个显示的界面"></a>做到这里别以为完事了，还要设置打开应用第一个显示的界面</h4><p><img src="https://img-blog.csdnimg.cn/20201021190043728.png#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20201021190401425.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMDAxMTYz,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p><h2 id="抄到这里应该是运行能直接运行成功的，第一次要注册完才能登录。"><a href="#抄到这里应该是运行能直接运行成功的，第一次要注册完才能登录。" class="headerlink" title="抄到这里应该是运行能直接运行成功的，第一次要注册完才能登录。"></a>抄到这里应该是运行能直接运行成功的，第一次要注册完才能登录。</h2><p><img src="https://img-blog.csdnimg.cn/20201021194335421.gif#pic_center" alt="在这里插入图片描述"></p><h2 id="祝你好运！！！"><a href="#祝你好运！！！" class="headerlink" title="祝你好运！！！"></a>祝你好运！！！</h2>]]></content>
      
      
      
        <tags>
            
            <tag> Android,SQlite </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>百度语音助手集成到Fragment里面怎么避坑？</title>
      <link href="/2021/11/12/BaiduVC/"/>
      <url>/2021/11/12/BaiduVC/</url>
      
        <content type="html"><![CDATA[<h2 id="百度语音助手集成到Fragment里面怎么避坑？"><a href="#百度语音助手集成到Fragment里面怎么避坑？" class="headerlink" title="百度语音助手集成到Fragment里面怎么避坑？"></a>百度语音助手集成到Fragment里面怎么避坑？</h2><p>其实集成到Fragment才是比较实用的，但是没看到有相关详细的教程，所以本人尝试去挖这个坑看看能不能填上，终于终于还是搞出来了。<br>首先你还是要进行一些导包修改版本等相关的操作，不懂可以点下这个链接<a href="https://blog.csdn.net/qq_42001163/article/details/106520112">百度语音识别集成到HelloWorld</a>，这个步骤完成后，回到你要集成的Fragment里面，可以看下我的Fragment的布局：<br><img src="https://img-blog.csdnimg.cn/20200607171402953.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMDAxMTYz,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span>?&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">FrameLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">    <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">    <span class="attr">tools:context</span>=<span class="string">".VcFragment"</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">RelativeLayout</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">tools:ignore</span>=<span class="string">"UselessParent"</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">ImageView</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            <span class="attr">android:id</span>=<span class="string">"@+id/iv_vc"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            <span class="attr">android:layout_width</span>=<span class="string">"100dp"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            <span class="attr">android:layout_height</span>=<span class="string">"100dp"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            <span class="attr">android:layout_alignParentEnd</span>=<span class="string">"true"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            <span class="attr">android:layout_alignParentBottom</span>=<span class="string">"true"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            <span class="attr">android:layout_marginEnd</span>=<span class="string">"154dp"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            <span class="attr">android:layout_marginBottom</span>=<span class="string">"160dp"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            <span class="attr">android:contentDescription</span>=<span class="string">"@string/to"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            <span class="attr">android:src</span>=<span class="string">"@drawable/ic_mkf"</span> /&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">TextView</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            <span class="attr">android:id</span>=<span class="string">"@+id/tv_vcResult"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            <span class="attr">android:layout_alignParentTop</span>=<span class="string">"true"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            <span class="attr">android:layout_alignParentEnd</span>=<span class="string">"true"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            <span class="attr">android:layout_centerVertical</span>=<span class="string">"true"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            <span class="attr">android:layout_marginTop</span>=<span class="string">"163dp"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            <span class="attr">android:layout_marginEnd</span>=<span class="string">"0dp"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            <span class="attr">android:text</span>=<span class="string">"@string/ress"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            <span class="attr">android:textAlignment</span>=<span class="string">"center"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            <span class="attr">android:textColor</span>=<span class="string">"@color/colorPrimary"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            <span class="attr">android:textSize</span>=<span class="string">"20sp"</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            <span class="attr">android:textStyle</span>=<span class="string">"bold"</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></span></span><br></pre></td></tr></tbody></table></figure><p>逻辑代码如下：</p><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> android.Manifest;</span><br><span class="line"><span class="keyword">import</span> android.annotation.SuppressLint;</span><br><span class="line"><span class="keyword">import</span> android.app.Activity;</span><br><span class="line"><span class="keyword">import</span> android.app.usage.UsageEvents;</span><br><span class="line"><span class="keyword">import</span> android.content.pm.PackageManager;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.annotation.NonNull;</span><br><span class="line"><span class="keyword">import</span> androidx.annotation.Nullable;</span><br><span class="line"><span class="keyword">import</span> androidx.core.app.ActivityCompat;</span><br><span class="line"><span class="keyword">import</span> androidx.core.content.ContextCompat;</span><br><span class="line"><span class="keyword">import</span> androidx.fragment.app.Fragment;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Handler;</span><br><span class="line"><span class="keyword">import</span> android.os.Message;</span><br><span class="line"><span class="keyword">import</span> android.util.Log;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.MotionEvent;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup;</span><br><span class="line"><span class="keyword">import</span> android.widget.ImageView;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baidu.aip.asrwakeup3.core.recog.MyRecognizer;</span><br><span class="line"><span class="keyword">import</span> com.baidu.aip.asrwakeup3.core.recog.listener.IRecogListener;</span><br><span class="line"><span class="keyword">import</span> com.baidu.aip.asrwakeup3.core.recog.listener.MessageStatusRecogListener;</span><br><span class="line"><span class="keyword">import</span> com.baidu.aip.asrwakeup3.core.recog.listener.StatusRecogListener;</span><br><span class="line"><span class="keyword">import</span> com.baidu.aip.asrwakeup3.core.util.FileUtil;</span><br><span class="line"><span class="keyword">import</span> com.baidu.speech.EventManager;</span><br><span class="line"><span class="keyword">import</span> com.baidu.speech.asr.SpeechConstant;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.json.JSONException;</span><br><span class="line"><span class="keyword">import</span> org.json.JSONObject;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedHashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.Objects;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * A simple {<span class="doctag">@link</span> Fragment} subclass.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">VcFragment</span> <span class="keyword">extends</span> <span class="title">Fragment</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">VcFragment</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="comment">// Required empty public constructor</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> TextView tv_vcResult;</span><br><span class="line">    <span class="comment">//    public EventManager asr;</span></span><br><span class="line">    <span class="keyword">protected</span> MyRecognizer myRecognizer;</span><br><span class="line">    <span class="keyword">protected</span> Handler handler;</span><br><span class="line">    <span class="keyword">protected</span> String resultTxt = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressLint({"ClickableViewAccessibility", "HandlerLeak"})</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> View <span class="title">onCreateView</span><span class="params">(<span class="meta">@NonNull</span> LayoutInflater inflater,<span class="meta">@Nullable</span> ViewGroup container,</span></span></span><br><span class="line"><span class="params"><span class="function">                             <span class="meta">@Nullable</span> Bundle savedInstanceState)</span> </span>{</span><br><span class="line">        <span class="comment">// Inflate the layout for this fragment</span></span><br><span class="line">        inflater = LayoutInflater.from(getContext());</span><br><span class="line">        View myview = inflater.inflate(R.layout.fragment_vc, container, <span class="keyword">false</span>);</span><br><span class="line">        <span class="comment">//建立一个线程来处理信息</span></span><br><span class="line">        handler = <span class="keyword">new</span> Handler() {</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleMessage</span><span class="params">(Message msg)</span> </span>{</span><br><span class="line">                <span class="keyword">super</span>.handleMessage(msg);</span><br><span class="line">                handleMsg(msg);</span><br><span class="line">            }</span><br><span class="line">        };</span><br><span class="line">        tv_vcResult = myview.findViewById(R.id.tv_vcResult);</span><br><span class="line">        ImageView iv_vc = myview.findViewById(R.id.iv_vc);</span><br><span class="line">        iv_vc.setOnTouchListener(<span class="keyword">new</span> View.OnTouchListener() {</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onTouch</span><span class="params">(View v, MotionEvent event)</span> </span>{</span><br><span class="line">                <span class="keyword">int</span> action = event.getAction();</span><br><span class="line">                <span class="keyword">if</span> (action == MotionEvent.ACTION_DOWN) {</span><br><span class="line">                    tv_vcResult.setText(<span class="string">"识别中..."</span>);</span><br><span class="line"><span class="comment">//                    Toast.makeText(getContext(), "正在识别....", Toast.LENGTH_SHORT).show();</span></span><br><span class="line">                    start();</span><br><span class="line">                } <span class="keyword">else</span> <span class="keyword">if</span> (action == MotionEvent.ACTION_UP) {</span><br><span class="line">                    stop();</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            }</span><br><span class="line">        });</span><br><span class="line">        initSpeechRecog();</span><br><span class="line">        initPermission();</span><br><span class="line">        <span class="keyword">return</span> myview;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//初始化语音识别</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initSpeechRecog</span><span class="params">()</span> </span>{</span><br><span class="line">        IRecogListener listener = <span class="keyword">new</span> MessageStatusRecogListener(handler);</span><br><span class="line">        <span class="keyword">if</span> (myRecognizer == <span class="keyword">null</span>) {</span><br><span class="line">            myRecognizer = <span class="keyword">new</span> MyRecognizer(<span class="keyword">this</span>.getContext(), listener);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//开始识别</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">final</span> Map&lt;String, Object&gt; params = <span class="keyword">new</span> LinkedHashMap&lt;String, Object&gt;();</span><br><span class="line">        params.put(SpeechConstant.ACCEPT_AUDIO_VOLUME, <span class="keyword">false</span>);</span><br><span class="line">        params.put(SpeechConstant.PID, <span class="number">1536</span>);<span class="comment">//普通话</span></span><br><span class="line">        myRecognizer.start(params);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//停止识别</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">stop</span><span class="params">()</span> </span>{</span><br><span class="line">        myRecognizer.stop();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//回调事件处理</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">handleMsg</span><span class="params">(Message msg)</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (msg.what == MessageStatusRecogListener.STATUS_FINISHED) {</span><br><span class="line"><span class="comment">//            String resultTxt = null;</span></span><br><span class="line">            <span class="keyword">try</span> {</span><br><span class="line">                JSONObject msgObj = <span class="keyword">new</span> JSONObject(msg.obj.toString());</span><br><span class="line">                <span class="keyword">if</span> (msg.arg2 == <span class="number">1</span>) {</span><br><span class="line">                    String error = msgObj.getString(<span class="string">"error"</span>);</span><br><span class="line">                    System.out.println(<span class="string">"error =&gt;"</span> + error);</span><br><span class="line">                    <span class="keyword">if</span> (<span class="string">"0"</span>.equals(error)) {</span><br><span class="line">                        resultTxt = msgObj.getString(<span class="string">"best_result"</span>);</span><br><span class="line">                        tv_vcResult.setText(resultTxt);</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line">            } <span class="keyword">catch</span> (JSONException e) {</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//释放资源</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>.onDestroy();</span><br><span class="line">        <span class="keyword">if</span> (myRecognizer != <span class="keyword">null</span>) {</span><br><span class="line">            myRecognizer.release();<span class="comment">//释放资源，不然程序会闪退</span></span><br><span class="line">            myRecognizer = <span class="keyword">null</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//调用权限</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initPermission</span><span class="params">()</span> </span>{</span><br><span class="line">        String[] permissions = {Manifest.permission.RECORD_AUDIO,</span><br><span class="line">                Manifest.permission.ACCESS_NETWORK_STATE,</span><br><span class="line">                Manifest.permission.INTERNET,</span><br><span class="line">                Manifest.permission.READ_PHONE_STATE,</span><br><span class="line">                Manifest.permission.WRITE_EXTERNAL_STORAGE,</span><br><span class="line">                Manifest.permission.MODIFY_AUDIO_SETTINGS,</span><br><span class="line">                Manifest.permission.ACCESS_WIFI_STATE,</span><br><span class="line">                Manifest.permission.CHANGE_WIFI_STATE</span><br><span class="line">        };</span><br><span class="line">        ArrayList&lt;String&gt; toApplyList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (String perm : permissions) {</span><br><span class="line">            <span class="keyword">if</span> (PackageManager.PERMISSION_GRANTED != ContextCompat.checkSelfPermission(Objects.requireNonNull(getActivity()), perm)) {</span><br><span class="line">                toApplyList.add(perm);</span><br><span class="line">                <span class="comment">//进入这里代表没有权限</span></span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        String[] tmplist = <span class="keyword">new</span> String[toApplyList.size()];</span><br><span class="line">        <span class="keyword">if</span> (!toApplyList.isEmpty()) {</span><br><span class="line">            ActivityCompat.requestPermissions(getActivity(), toApplyList.toArray(tmplist), <span class="number">123</span>);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onRequestPermissionsResult</span><span class="params">(<span class="keyword">int</span> requestCode, <span class="meta">@NonNull</span> String[] permissions, <span class="meta">@NonNull</span> <span class="keyword">int</span>[] grantResults)</span> </span>{</span><br><span class="line">        <span class="comment">// 此处为android 6.0以上动态授权的回调，用户自行实现。</span></span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure><p>然后你可以在自己的日志看到识别效果，但是你的TextView一点反应都没，怎么办呢？<br><img src="https://img-blog.csdnimg.cn/20200607172207808.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMDAxMTYz,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>首先把Android改成Project,找到以下路径<br><img src="https://img-blog.csdnimg.cn/20200607172401906.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMDAxMTYz,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>修改两行代码就可以了，如下图所示：<br><img src="https://img-blog.csdnimg.cn/202006071724567.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMDAxMTYz,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>效果可以看图<img src="https://img-blog.csdnimg.cn/20200607172851700.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMDAxMTYz,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android,Baidu语音识别 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>正则表达式匹配规则</title>
      <link href="/2021/11/08/RE/"/>
      <url>/2021/11/08/RE/</url>
      
        <content type="html"><![CDATA[<h2 id="基本正则表达式"><a href="#基本正则表达式" class="headerlink" title="基本正则表达式"></a>基本正则表达式</h2><center>BRE元字符表</center><div class="table-container"><table><thead><tr><th style="text-align:center">元字符</th><th style="text-align:center">说明</th></tr></thead><tbody><tr><td style="text-align:center">*</td><td style="text-align:center">将*前面的正则表达式匹配的结果重复任意次(含0次)。</td></tr><tr><td style="text-align:center">+</td><td style="text-align:center">与星号(*)相同，只是至少重复1次，GNU的扩展功能。</td></tr><tr><td style="text-align:center">\?</td><td style="text-align:center">与星号(*)相同，只是最多重复1次，GNU的扩展功能。</td></tr><tr><td style="text-align:center">{i}</td><td style="text-align:center">与星号(*)相同，只是重复指定的i次。</td></tr><tr><td style="text-align:center">{i,j}</td><td style="text-align:center">与星号(*)相同，只是重复i至j次。</td></tr><tr><td style="text-align:center">{i, }</td><td style="text-align:center">与星号(*)相同，只是至少重复i次。</td></tr><tr><td style="text-align:center">(regexp)</td><td style="text-align:center">将regexp看作一个整体，用于后向引用，与\digit配合使用。</td></tr><tr><td style="text-align:center">.</td><td style="text-align:center">匹配任意单个字符。</td></tr><tr><td style="text-align:center">^</td><td style="text-align:center">表示行首,匹配模版空间开始处的NULL字符串。</td></tr><tr><td style="text-align:center">^abc</td><td style="text-align:center">匹配以 abc 开头的字符串</td></tr><tr><td style="text-align:center">$</td><td style="text-align:center">表示行尾,匹配的是模版空间结束处的NULL字符串。</td></tr><tr><td style="text-align:center">}$</td><td style="text-align:center">匹配以大括号结尾的字符串</td></tr><tr><td style="text-align:center">[list]</td><td style="text-align:center">匹配方括号中的字符列表中的任意一个。</td></tr><tr><td style="text-align:center"><sup><a href="#fn_list" id="reffn_list">list</a></sup></td><td style="text-align:center">否定匹配方括号中的字符列表中的任意一个。</td></tr><tr><td style="text-align:center">regexp1regexp2</td><td style="text-align:center">匹配regexp1和regexp2的连接结果。</td></tr><tr><td style="text-align:center">\digit</td><td style="text-align:center">匹配正则表达式前半部分定义的后向引用的第digit个子表达式。digit为1至9的数字, 1为从左开始。</td></tr><tr><td style="text-align:center">\n</td><td style="text-align:center">匹配换行符。</td></tr><tr><td style="text-align:center">\meta</td><td style="text-align:center">将元字符meta转换成普通字符，以便匹配该字符本身，有$、 *、 .、 [、  和 ^。</td></tr></tbody></table></div><center>字符匹配表</center><div class="table-container"><table><thead><tr><th style="text-align:center">表达式</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center"> [a-z]</td><td style="text-align:center">表示<code>a-z</code>字符中的一个，也就是小写字母</td><td></td></tr><tr><td style="text-align:center"> [0-9]</td><td style="text-align:center">表示<code>0-9</code>字符中的一个，也就是数字</td><td></td></tr><tr><td style="text-align:center"> [A-Z]</td><td style="text-align:center">表示<code>A-Z</code>字符中的一个，也就是大写字母</td><td></td></tr><tr><td style="text-align:center"> [abc]</td><td style="text-align:center">表示字符<code>a</code>或字符<code>b</code>或字符<code>c</code></td><td></td></tr><tr><td style="text-align:center"> <sup><a href="#fn_0-9" id="reffn_0-9">0-9</a></sup></td><td style="text-align:center">表示非数字类型字符</td><td></td></tr></tbody></table></div><h2 id="拓展正则表达式"><a href="#拓展正则表达式" class="headerlink" title="拓展正则表达式"></a>拓展正则表达式</h2><p>扩展正则表达式除了以下元字符与基本正则表达式不同外，其余相似。</p><p align="left">BRE与ERE元字符对应表</p><div class="table-container"><table><thead><tr><th style="text-align:center">基本正则表达式</th><th style="text-align:center">扩展正则表达式</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center"><code>\?</code></td><td style="text-align:center">?</td><td style="text-align:center">表示前置字符有 0 个或 1 个；</td></tr><tr><td style="text-align:center"><code>\+</code></td><td style="text-align:center">+</td><td style="text-align:center">表示前置字符有 1 个或多个；</td></tr><tr><td style="text-align:center"><code>\</code></td><td style="text-align:center"><code>中竖线</code></td><td style="text-align:center">表示匹配其中的一项即可；</td></tr><tr><td style="text-align:center"><code>\{ \}</code></td><td style="text-align:center">{ }</td><td style="text-align:center">和基本正则中的大括号中意义相同，只不过使用时不用加 转义符号；</td></tr><tr><td style="text-align:center"><code>\( \)</code></td><td style="text-align:center">( )</td><td style="text-align:center">表示分组，(a\b)b 表示可以匹配 ab 或 bb 子串，且命令表达式中可以通过 \1、\2 来表示匹配的变量</td></tr></tbody></table></div><h2 id="常用转义字符"><a href="#常用转义字符" class="headerlink" title="常用转义字符"></a>常用转义字符</h2><center>转义字符表</center><div class="table-container"><table><thead><tr><th style="text-align:center">转义字符</th><th style="text-align:center">说明</th></tr></thead><tbody><tr><td style="text-align:center">\a</td><td style="text-align:center">匹配一个BEL字符。</td></tr><tr><td style="text-align:center">\f</td><td style="text-align:center">匹配一个换页字符。</td></tr><tr><td style="text-align:center">\n</td><td style="text-align:center">匹配一个换行字符。</td></tr><tr><td style="text-align:center">\r</td><td style="text-align:center">匹配一个回车字符。</td></tr><tr><td style="text-align:center">\t</td><td style="text-align:center">匹配一个水平Tab字符。</td></tr><tr><td style="text-align:center">\v</td><td style="text-align:center">匹配一个垂直Tab字符。</td></tr><tr><td style="text-align:center">\cX</td><td style="text-align:center">匹配Control+X，X是任意字符。</td></tr><tr><td style="text-align:center">\dXXX</td><td style="text-align:center">匹配一个ASCII码是十进制XXX的字符。</td></tr><tr><td style="text-align:center">\oXXX</td><td style="text-align:center">匹配一个ASCII码是八进制XXX的字符。</td></tr><tr><td style="text-align:center">\xXX</td><td style="text-align:center">匹配一个ASCII码是十六进制XX的字符。</td></tr><tr><td style="text-align:center">\w</td><td style="text-align:center">匹配任意一个单词字符(字母、数字和下划线)。</td></tr><tr><td style="text-align:center">\W</td><td style="text-align:center">匹配任意一个非单词字符。</td></tr><tr><td style="text-align:center">\b</td><td style="text-align:center">匹配一个单词的边界符：字符的左边是一个单词字符，并且右边是一个非单词字符，反之亦然。</td></tr><tr><td style="text-align:center">\B</td><td style="text-align:center">匹配除单词边界符外所有字符：字符的左边和右边同时是单词字符或非单词字符。</td></tr></tbody></table></div>]]></content>
      
      
      <categories>
          
          <category> Linux,Shell </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux,Shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux文件权限详解</title>
      <link href="/2021/11/08/Linux-File-Permissions/"/>
      <url>/2021/11/08/Linux-File-Permissions/</url>
      
        <content type="html"><![CDATA[<p>Linux是一个多用户操作系统，它以“所有权”和“权限”的概念来保​​证文件的安全。</p><h2 id="Users-用户-和groups（组）"><a href="#Users-用户-和groups（组）" class="headerlink" title="Users(用户)和groups（组）"></a><code>Users(用户)</code>和<code>groups（组）</code></h2><ul><li>Linux 使用用户的概念来区分使用计算机的各种人。</li><li>每个用户都有一些与之关联的属性，例如用户 ID 和主目录。</li><li>为了更轻松地管理用户，您可以将用户添加到“组”中。</li><li>一个组可以有零个或多个用户。特定用户与“默认组”相关联，也可以是系统上其他组的成员。</li><li>如果要查看系统上的用户，可以/etc/passwd 通过运行以下命令查看文件：<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ cat /etc/passwd</span><br></pre></td></tr></tbody></table></figure></li><li>在这里，每一行都包含用户的详细信息。具体来说，您可以在每一行的开头看到用户名，在第一行之前<code>:</code>。</li><li>同样，您可以<code>/etc/group</code>通过运行以下命令查看文件来查看系统上的组：<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ cat /etc/group</span><br></pre></td></tr></tbody></table></figure></li><li>同样，每一行都包含用户的详细信息。每行的第一部分包含组名。运行这些命令时，您会注意到还有许多其他用户和组不是您创建的。这些是系统用户和组，用于安全地运行后台进程。</li></ul><h2 id="Ownership（所有权）-和-permissions（权限）"><a href="#Ownership（所有权）-和-permissions（权限）" class="headerlink" title="Ownership（所有权） 和 permissions（权限）"></a><code>Ownership（所有权）</code> 和 <code>permissions（权限）</code></h2><p>在 Linux 中，我们使用权限来控制用户可以对文件或目录执行的操作。Linux 使用三种类型的权限：</p><ul><li><strong>读取（r）</strong>：对于文件，读取权限允许用户查看文件的内容。对于目录，读取权限允许用户查看存储在其中的文件和其他目录的名称。</li><li><strong>写 (w)</strong>：对于文件，写权限允许用户修改和删除文件。对于目录，写权限允许用户修改其内容（创建、删除和重命名其中的文件）。但是，除非同时启用了执行权限，否则此权限对目录没有影响。</li><li><strong>执行 (x)</strong>：当在文件上设置时，写权限允许它被执行。但是，除非还启用了读取权限，否则该权限对文件没有影响。另一方面，对于目录，写入权限允许用户进入目录（带有cd）并查看其中的文件和目录的元数据（如文件权限）。</li></ul><p>文件和目录只能由单个用户和单个组拥有。每当用户创建文件或目录时，该文件由用户和用户的默认组“拥有”。</p><p>对于任何文件或目录，都有三种类型的“权限类”。您可以为这些类分配不同的权限，从而控制谁可以访问和修改文件。权限类如下：</p><ul><li><strong>用户</strong>：此类中的权限会影响文件的所有者。</li><li><strong>组</strong>：此类中的权限影响拥有该文件的组。但是，如果所有者用户在该组中，则应用“用户”权限，而不是组权限。</li><li><strong>其他</strong>：此类中的权限会影响系统上的所有其他用户。</li></ul><h2 id="查看权限"><a href="#查看权限" class="headerlink" title="查看权限"></a>查看权限</h2><p>查看给定目录中文件权限的最简单方法是运行：<br></p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ ls -l &lt;目标路径&gt;</span><br></pre></td></tr></tbody></table></figure><br>如果要查看当前目录中的权限，请在末尾省略目录名称：<p></p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ ls -l</span><br></pre></td></tr></tbody></table></figure><p>例如，我们使用”目录”显示目录的内容。输出以列的形式显示，如下所示：<code>ls -l /etc</code></p><p><img src="https://www.booleanworld.com/wp-content/uploads/2018/04/permissions-annotated.png?ezimgfmt=ng:webp/ngcb20" alt="image"></p><p>由上图可知”文件模式”、”所有者”、”组”的具体信息。<br>而”文件模式”列以紧凑的方式显示文件类型和权限，如下所示：</p><p><img src="https://www.booleanworld.com/wp-content/uploads/2018/04/classes.png?ezimgfmt=ng:webp/ngcb20" alt="image"></p><ul><li>第一个字符表示文件的类型。一个正常的文件代表与一个<code>-</code>,目录与一个<code>d</code>和象征性的链接<code>l</code>。例如，在截图中<code>ls</code>，您可以说<code>acpi</code>这是一个目录，而<code>adduser.conf</code>是一个文件。</li><li>然后，我们拥有相应的”用户”、”组”和”其他”类的权限。<code>rwx</code>表示这些类是否具有读取、编写和执行权限。如果<code>rwx</code>中出现一个<code>-</code>，则意味着相应的权限被禁用了。</li><li>现在，思考下<code>at.deny</code>这个文件，它的”文件模式”是<code>-rw-r--r--</code>。这意味着”root”用户拥有读取、编写的权限。”root”组中的用户以及任何”其他”用户只拥有读取的权限。</li></ul><h3 id="表示权限：数字和符号模式"><a href="#表示权限：数字和符号模式" class="headerlink" title="表示权限：数字和符号模式"></a>表示权限：数字和符号模式</h3><p>上面的例子已经介绍如何使用<code>rwx</code>表示权限，这种方式叫做”符号模式”，但是，还有一种使用数字（称为”数字模式”）来表示权限的附加方式。</p><p>例如，请考虑上面讨论过的<code>acpi</code>目录。此目录的符号模式是<code>rwxr-xr-x</code> 。现在，为了获得等效的数字模式，可以采取”用户”、”组”和”其他”的单独权限。如果启用了权限，就放 <code>1``表示，如果禁用了，就放</code>0```表示。通过这样做，我们获得一个二进制号码，并将其转换为十进制。因此，对于目录，您可以获得如下所示的符号模式：</p><p><img src="https://www.booleanworld.com/wp-content/uploads/2018/04/43260_115.png?ezimgfmt=ng:webp/ngcb20" alt="image"></p><p>因此，这样获得的数字模式为<code>755</code>。同样，如果数字模式（如 <code>644</code>），您可以将其转换为二进制，每一个数字代表一组二进制，然后放入对应的字母<code>rwx</code>中,如结果为<code>1</code>就表示启用权限就要在对应的位置写上对应权限的字母，如果是<code>0</code>就表示禁用了权限，在对应位置写上<code>-</code>。可以参考下图的分析：</p><p><img src="https://www.booleanworld.com/wp-content/uploads/2018/04/sym2num1.png?ezimgfmt=ng:webp/ngcb20" alt="image"></p><p>因此，这样获得的符号模式为<code>rw-r--r--</code>,这就表示所有者有读写权限，而组用户和其他用户只要读权限。</p><h4 id="如果不熟悉转换二进制的方式解读权限，可以参考下图数字与权限的解读："><a href="#如果不熟悉转换二进制的方式解读权限，可以参考下图数字与权限的解读：" class="headerlink" title="如果不熟悉转换二进制的方式解读权限，可以参考下图数字与权限的解读："></a>如果不熟悉转换二进制的方式解读权限，可以参考下图数字与权限的解读：</h4><div class="table-container"><table><thead><tr><th style="text-align:center">二进制数</th><th style="text-align:center"><code>rwx</code></th><th style="text-align:center">权限描述</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:center"><code>---</code></td><td style="text-align:center">无权限</td></tr><tr><td style="text-align:center">1</td><td style="text-align:center"><code>--x</code></td><td style="text-align:center">执行</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center"><code>-w-</code></td><td style="text-align:center">写</td></tr><tr><td style="text-align:center">3</td><td style="text-align:center"><code>-wx</code></td><td style="text-align:center">编写和执行</td></tr><tr><td style="text-align:center">4</td><td style="text-align:center"><code>r--</code></td><td style="text-align:center">读</td></tr><tr><td style="text-align:center">5</td><td style="text-align:center"><code>r-x</code></td><td style="text-align:center">阅读和执行</td></tr><tr><td style="text-align:center">6</td><td style="text-align:center"><code>rw-</code></td><td style="text-align:center">读写</td></tr><tr><td style="text-align:center">7</td><td style="text-align:center"><code>rwx</code></td><td style="text-align:center">阅读、编写和执行</td></tr></tbody></table></div><h3 id="更改权限：chmod命令"><a href="#更改权限：chmod命令" class="headerlink" title="更改权限：chmod命令"></a>更改权限：chmod命令</h3><p>创建文件或目录时，您可能需要更改某些权限。您可以通过<code>chmod</code>命令做到这一点。</p><p>首先，先创建一个用于测试目的的文件。<br></p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ touch file.txt</span><br><span class="line"></span><br><span class="line">kizaiwsl2@KIZAI-DESKTOP:~$ touch file.txt</span><br><span class="line">kizaiwsl2@KIZAI-DESKTOP:~$ ls -l file.txt</span><br><span class="line">-rw-r--r-- 1 kizaiwsl2 kizaiwsl2 0 9月  16 21:56 file.txt</span><br></pre></td></tr></tbody></table></figure><br>可以使用<code>ls -l file.txt</code>来查看该文件的权限，由结果可知该文件的权限是<code>rw-r--r--</code>。<p></p><p>现在，假设您要添加所有用户的执行权限 - 所有者、组和其他用户。由于我希望为所有用户添加执行权限，因此我使用<code>a+x</code>实现这个功能：<br></p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ chmod a+x file.txt</span><br></pre></td></tr></tbody></table></figure><p></p><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">```bash</span><br><span class="line">kizaiwsl2@KIZAI-DESKTOP:~$ chmod a+x file.txt</span><br><span class="line">kizaiwsl2@KIZAI-DESKTOP:~$ ls -l file.txt</span><br><span class="line">-rwxr-xr-x 1 kizaiwsl2 kizaiwsl2 0 9月  16 21:56 file.txt</span><br></pre></td></tr></tbody></table></figure><p>其实默认情况下<code>chmod</code>执行的对象是所有用户，你可以把<code>a</code>去掉，用下面的命令也同样能实现相同的功能。</p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ chmod +x file.txt</span><br></pre></td></tr></tbody></table></figure><p>chmod还可以更细致改变文件的权限，u、g、o这些字母分别表示“用户”、“组”、“其他用户”，同样它也能使用-去掉某一个权限，还是以file.txt的文件为例，我现在不想其他用户拥有读和执行的权限，组里面去掉读的权限，可以使用以下的命令：注意我使用,来分别对不同用户进行权限的操作。</p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ chmod o-rx,g-r file.txt</span><br><span class="line"></span><br><span class="line">kizaiwsl2@KIZAI-DESKTOP:~$ chmod o-rx,g-r file.txt</span><br><span class="line">kizaiwsl2@KIZAI-DESKTOP:~$ ls -l file.txt</span><br><span class="line">-rwx--x--- 1 kizaiwsl2 kizaiwsl2 0 9月  16 21:56 file.txt</span><br></pre></td></tr></tbody></table></figure><p>有时，我希望可以给设置的权限，而不是增加或删除权限。<code>chmod</code>命令是支持使用<code>=</code>来实现这个功能。<br>例如，我想把file.txt的文件设置为所有者的权限为<code>rwx</code>,组为<code>r--</code>,其他用户为<code>--x</code>。可以用下面的命令来实现。</p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ chmod u=rwx,g=r,o=x file.txt</span><br><span class="line"></span><br><span class="line">kizaiwsl2@KIZAI-DESKTOP:~$ chmod u=rwx,g=r,o=x file.txt</span><br><span class="line">kizaiwsl2@KIZAI-DESKTOP:~$ ls -l file.txt</span><br><span class="line">-rwxr----x 1 kizaiwsl2 kizaiwsl2 0 9月  16 21:56 file.txt</span><br></pre></td></tr></tbody></table></figure><p>以上给文件赋权限都是采用符号的模式，现在开始介绍使用数字的模式来给文件赋值权限，这也是日后最常用的赋权限的主要方式。</p><p>如果我想把file.txt的权限修改为<code>rwxrw-r--</code>,那么它对应的数字权限应该为``764```,那么可以使用以下命令来修改：<br></p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ chmod 764 file.txt</span><br><span class="line"></span><br><span class="line">kizaiwsl2@KIZAI-DESKTOP:~$ chmod 764 file.txt</span><br><span class="line">kizaiwsl2@KIZAI-DESKTOP:~$ ls -l file.txt</span><br><span class="line">-rwxrw-r-- 1 kizaiwsl2 kizaiwsl2 0 9月  16 21:56 file.txt</span><br></pre></td></tr></tbody></table></figure><p></p><p>最后，如何你想设置一个文件夹的所有文件的权限可以使用<code>-R</code>来实现。<br>例如，你想添加执行权限在<code>test</code>文件夹的所有文件，可以使用：<br></p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ chmod -R +x <span class="built_in">test</span></span><br></pre></td></tr></tbody></table></figure><p></p><p>请记住你只能修改您拥有的文件的权限，而不能修改不是您的文件权限，如果你真的需要修改别人的文件权限的话，那么可以使用<code>sudo</code>来实现.<br></p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">sudo chmod &lt;文件权限&gt; &lt;文件路径/文件名&gt;</span><br></pre></td></tr></tbody></table></figure><p></p><h3 id="更改所有权：chown命令"><a href="#更改所有权：chown命令" class="headerlink" title="更改所有权：chown命令"></a>更改所有权：<code>chown</code>命令</h3><p>为了更改文件或目录的所有权，您可以使用<code>chown</code>命令。它可以更改所有者和所有者的组。(还有一个<code>chgrp</code>命令，它改变了拥有文件的组，但<code>chown</code>也可以这样做。)</p><p>假设，您有一个文件file.txt,您希望将所有权更改为用户，你可以运行以下命令：<br></p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ sudo chown root file.txt</span><br></pre></td></tr></tbody></table></figure><br>不像<code>chmod</code>命令，第一次使用<code>chown</code>命令需要用到<code>roo</code>用户，后面再使用<code>chown</code>命令就不需要用<code>sudo</code>了。<p></p><p>可以查看执行后的结果;</p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">kizaiwsl2@KIZAI-DESKTOP:~$ sudo chown root file.txt</span><br><span class="line">[sudo] password <span class="keyword">for</span> kizaiwsl2:</span><br><span class="line">kizaiwsl2@KIZAI-DESKTOP:~$ ls -l file.txt</span><br><span class="line">-rwxrw-r-- 1 root kizaiwsl2 0 9月  16 21:56 file.txt</span><br></pre></td></tr></tbody></table></figure><p>假设您想将所有者组更改为<code>daemon</code>。为此，提及以类似名称需要在前面加一个<code>:</code><br></p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ sudo chown :daemon file.txt</span><br><span class="line"></span><br><span class="line">kizaiwsl2@KIZAI-DESKTOP:~$ sudo chown :daemon file.txt</span><br><span class="line">kizaiwsl2@KIZAI-DESKTOP:~$ ls -l file.txt</span><br><span class="line">-rwxrw-r-- 1 root daemon 0 9月  16 21:56 file.txt</span><br></pre></td></tr></tbody></table></figure><p></p><p>如果您想更改所有者用户以及所有者组，把file.txt文件的用户改成<code>kizaiwsl2</code>，用户组<code>root</code>，可以运行以下命令：</p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ sudo chown kizaiwsl2:root file.txt</span><br><span class="line"></span><br><span class="line">kizaiwsl2@KIZAI-DESKTOP:~$ sudo chown kizaiwsl2:root file.txt</span><br><span class="line">kizaiwsl2@KIZAI-DESKTOP:~$ ls -l file.txt</span><br><span class="line">-rwxrw-r-- 1 kizaiwsl2 root 0 9月  16 21:56 file.txt</span><br></pre></td></tr></tbody></table></figure><p>有时，您可能需要将所有者更改为特定用户及其默认组。虽然您可以手动找出用户的默认组，然后运行命令，<code>chown</code> 允许您通过排除：在末尾自动执行此操作。例如，如果您要将所有权更改为<code>root</code>及其默认组，请运行：</p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ sudo chown root: file.txt</span><br><span class="line"></span><br><span class="line">kizaiwsl2@KIZAI-DESKTOP:~$ sudo chown root: file.txt</span><br><span class="line">kizaiwsl2@KIZAI-DESKTOP:~$ ls -l file.txt</span><br><span class="line">-rwxrw-r-- 1 root root 0 9月  16 21:56 file.txt</span><br></pre></td></tr></tbody></table></figure><p>像<code>chmod</code>命令一样,<code>chown</code>也支持<code>-R</code>标志。<br>例如，如果您要更改所有文件的所有者用户以root用于test目录，请运行：<br></p><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">$ sudo chown -R root: test</span><br></pre></td></tr></tbody></table></figure><p></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Tmux常用命令</title>
      <link href="/2021/11/07/Tmux/"/>
      <url>/2021/11/07/Tmux/</url>
      
        <content type="html"><![CDATA[<p><img src="https://gitee.com/Kizai/blogimages/raw/master/img/202111080002059.png" alt="tmux"></p><h3 id="安装tmux"><a href="#安装tmux" class="headerlink" title="安装tmux"></a>安装tmux</h3><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">sudo apt install tmux</span><br></pre></td></tr></tbody></table></figure><h3 id="启动或退出"><a href="#启动或退出" class="headerlink" title="启动或退出"></a>启动或退出</h3><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 启动创建一个session</span></span><br><span class="line">$ tmux</span><br><span class="line"><span class="comment"># 退出</span></span><br><span class="line">$ <span class="built_in">exit</span> or crtl+d</span><br></pre></td></tr></tbody></table></figure><h3 id="前缀键"><a href="#前缀键" class="headerlink" title="前缀键"></a>前缀键</h3><ul><li><p>Tmux 窗口有大量的快捷键。所有快捷键都要通过前缀键唤起。默认的前缀键是<code>Ctrl+b</code>，即先按下<code>Ctrl+b</code>，快捷键才会生效。</p></li><li><p>举例来说，帮助命令的快捷键是<code>Ctrl+b ?</code>。它的用法是，在 Tmux 窗口中，先按下<code>Ctrl+b</code>，再按下<code>?</code>，就会显示帮助信息。</p></li><li><p>然后，按下 <code>ESC</code> 键或<code>q</code>键，就可以退出帮助。</p></li></ul><h3 id="新建会话"><a href="#新建会话" class="headerlink" title="新建会话"></a>新建会话</h3><ul><li>第一个启动的 Tmux 窗口，编号是0，第二个窗口的编号是1，以此类推。这些窗口对应的会话，就是 0 号会话、1 号会话。</li><li>使用编号区分会话，不太直观，更好的方法是为会话起名。<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 新建一个指定名称的会话。</span></span><br><span class="line">$ tmux new -s &lt;session-name&gt; </span><br></pre></td></tr></tbody></table></figure><h3 id="分离会话"><a href="#分离会话" class="headerlink" title="分离会话"></a>分离会话</h3></li><li>在 Tmux 窗口中，按下<code>Ctrl+b d</code>或者输入<code>tmux detach</code>命令，就会将当前会话与窗口分离。<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ tmux detach</span><br></pre></td></tr></tbody></table></figure></li><li>上面命令执行后，就会退出当前 Tmux 窗口，但是会话和里面的进程仍然在后台运行。</li><li><code>tmux ls</code>可以查看当前所有的tmux会话。<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ tmux ls</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">$ tmux list-session</span><br></pre></td></tr></tbody></table></figure><h3 id="接入会话"><a href="#接入会话" class="headerlink" title="接入会话"></a>接入会话</h3></li><li><code>tmux attach</code>命令用于重新接入某个已存在的会话。<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 使用会话编号</span></span><br><span class="line">$ tmux attach -t 0</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">$ tmux a -t 0</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">$ tmux a</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用会话名称</span></span><br><span class="line">$ tmux attach -t &lt;session-name&gt;</span><br></pre></td></tr></tbody></table></figure><h3 id="杀死会话"><a href="#杀死会话" class="headerlink" title="杀死会话"></a>杀死会话</h3></li><li><code>tmux kill-session</code>命令用于杀死某个会话。<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 使用会话编号</span></span><br><span class="line">$ tmux kill-session -t 0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用会话名称</span></span><br><span class="line">$ tmux kill-session -t &lt;session-name&gt;</span><br></pre></td></tr></tbody></table></figure><h3 id="切换会话"><a href="#切换会话" class="headerlink" title="切换会话"></a>切换会话</h3><code>tmux switch</code><br>命令用于切换会话。<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 使用会话编号</span></span><br><span class="line">$ tmux switch -t 0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用会话名称</span></span><br><span class="line">$ tmux switch -t &lt;session-name&gt;</span><br></pre></td></tr></tbody></table></figure><h3 id="重命名会话"><a href="#重命名会话" class="headerlink" title="重命名会话"></a>重命名会话</h3><code>tmux rename-session</code><br>命令用于重命名会话。<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ tmux rename-session -t 0 &lt;new-name&gt;</span><br><span class="line"><span class="comment"># or 在session中使用"Ctrl+b $"也能对会话进行重命名</span></span><br></pre></td></tr></tbody></table></figure><h3 id="会话快捷键"><a href="#会话快捷键" class="headerlink" title="会话快捷键"></a>会话快捷键</h3></li><li>下面是一些会话相关的快捷键。<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">Ctrl+b d：<span class="comment"># 分离当前会话。</span></span><br><span class="line">Ctrl+b s：<span class="comment"># 列出所有会话。</span></span><br><span class="line">Ctrl+b $：<span class="comment"># 重命名当前会话。</span></span><br></pre></td></tr></tbody></table></figure><h3 id="最简操作流程"><a href="#最简操作流程" class="headerlink" title="最简操作流程"></a>最简操作流程</h3><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">1. 新建会话tmux new -s my_session。</span><br><span class="line">2. 在 Tmux 窗口运行所需的程序。</span><br><span class="line">3. 按下快捷键Ctrl+b d将会话分离。</span><br><span class="line">4. 下次使用时，重新连接到会话tmux attach-session -t my_session。</span><br></pre></td></tr></tbody></table></figure></li></ul><h3 id="窗格操作"><a href="#窗格操作" class="headerlink" title="窗格操作"></a>窗格操作</h3><ul><li>Tmux 可以将窗口分成多个窗格（pane），每个窗格运行不同的命令。以下命令都是在 Tmux 窗口中执行。</li><li><code>tmux split-window</code>命令用来划分窗格。<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line"># 划分上下两个窗格</span><br><span class="line">$ tmux split-window </span><br><span class="line"># or 使用快捷键"Ctrl+d " "</span><br><span class="line"></span><br><span class="line"># 划分左右两个窗格</span><br><span class="line">$ tmux split-window -h</span><br><span class="line"># or 使用快捷键"Ctrl+d % "</span><br></pre></td></tr></tbody></table></figure></li></ul><h3 id="窗格快捷键"><a href="#窗格快捷键" class="headerlink" title="窗格快捷键"></a>窗格快捷键</h3><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">* Ctrl+b %：划分左右两个窗格。</span><br><span class="line">* Ctrl+b "：划分上下两个窗格。</span><br><span class="line">* Ctrl+b &lt;arrow key&gt;：光标切换到其他窗格。&lt;arrow key&gt;是指向要切换到的窗格的方向键，比如切换到下方窗格，就按方向键↓。</span><br><span class="line">* Ctrl+b ;：光标切换到上一个窗格。</span><br><span class="line">* Ctrl+b o：光标切换到下一个窗格。</span><br><span class="line">* Ctrl+b {：当前窗格与上一个窗格交换位置。</span><br><span class="line">* Ctrl+b }：当前窗格与下一个窗格交换位置。</span><br><span class="line">* Ctrl+b Ctrl+o：所有窗格向前移动一个位置，第一个窗格变成最后一个窗格。</span><br><span class="line">* Ctrl+b Alt+o：所有窗格向后移动一个位置，最后一个窗格变成第一个窗格。</span><br><span class="line">* Ctrl+b x：关闭当前窗格。</span><br><span class="line">* Ctrl+b !：将当前窗格拆分为一个独立窗口。</span><br><span class="line">* Ctrl+b z：当前窗格全屏显示，再使用一次会变回原来大小。</span><br><span class="line">* Ctrl+b Ctrl+&lt;arrow key&gt;：按箭头方向调整窗格大小。</span><br><span class="line">* Ctrl+b q：显示窗格编号。</span><br></pre></td></tr></tbody></table></figure><h3 id="窗口快捷键"><a href="#窗口快捷键" class="headerlink" title="窗口快捷键"></a>窗口快捷键</h3><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">* Ctrl+b c：创建一个新窗口，状态栏会显示多个窗口的信息。</span><br><span class="line">* Ctrl+b p：切换到上一个窗口（按照状态栏上的顺序）。</span><br><span class="line">* Ctrl+b n：切换到下一个窗口。</span><br><span class="line">* Ctrl+b &lt;number&gt;：切换到指定编号的窗口，其中的&lt;number&gt;是状态栏上的窗口编号。</span><br><span class="line">* Ctrl+b w：从列表中选择窗口。</span><br><span class="line">* Ctrl+b ,：窗口重命名。</span><br></pre></td></tr></tbody></table></figure><h3 id="其他命令"><a href="#其他命令" class="headerlink" title="其他命令"></a>其他命令</h3><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line"># 列出所有快捷键，及其对应的 Tmux 命令</span><br><span class="line">$ tmux list-keys</span><br><span class="line"></span><br><span class="line"># 列出所有 Tmux 命令及其参数</span><br><span class="line">$ tmux list-commands</span><br><span class="line"></span><br><span class="line"># 列出当前所有 Tmux 会话的信息</span><br><span class="line">$ tmux info</span><br><span class="line"></span><br><span class="line"># 重新加载当前的 Tmux 配置</span><br><span class="line">$ tmux source-file ~/.tmux.conf</span><br></pre></td></tr></tbody></table></figure><h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><ul><li><a href="https://www.hamvocke.com/blog/a-quick-and-easy-guide-to-tmux/">A Quick and Easy Guide to tmux</a></li><li><a href="https://danielmiessler.com/study/tmux/">Tactical tmux: The 10 Most Important Commands</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Linux,Shell </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux,Shell </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
